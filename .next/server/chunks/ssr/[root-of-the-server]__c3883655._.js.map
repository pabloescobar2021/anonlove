{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../app/anonlove/things/hooks/useMessages.ts","../../../../app/anonlove/things/utils/messages.ts","../../../../app/anonlove/things/hooks/useAuth.ts","../../../../app/anonlove/things/utils/auth.ts","../../../../app/anonlove/createcard/CreateCardClient.tsx","../../../../app/anonlove/createcard/useRandColor.ts","../../../../app/anonlove/createcard/btnFunction.ts","../../../../app/anonlove/createcard/useItemInteractions.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","\"use client\"\r\n\r\nimport { useState, useEffect, useMemo } from \"react\"\r\nimport { getInboxMessages, getSentMessages, sendMessage, getCurrentMessage } from \"../utils/messages\"\r\nimport { ItemDto, Message } from \"../types/type\"\r\n\r\n\r\n\r\nexport function useMessages(userId: string | null) {\r\n    const [inbox, setInbox] = useState<any[]>([])\r\n    const [sent, setSent] = useState<any[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n\r\n    const loadMessage = async () => {\r\n        if(!userId) return\r\n\r\n        try{\r\n            setLoading(true)\r\n            const [inboxData, sentData] = await Promise.all([\r\n                getInboxMessages(userId), \r\n                getSentMessages(userId)\r\n            ])\r\n\r\n            setInbox(inboxData)\r\n            setSent(sentData)\r\n        } catch (error) {\r\n            console.error(\"Error loading messages:\", error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadMessage()\r\n    },[userId])\r\n\r\n    const send = async (\r\n        to: {publicId?: string, userId?: string}, \r\n        body: ItemDto[],\r\n        isAnon?: boolean \r\n    ) => {\r\n        if(!userId) throw new Error(\"User not logged in\")\r\n        \r\n        await sendMessage({\r\n            fromUserId: userId,\r\n            toUserId: to.userId,\r\n            toPublicId: to.publicId, \r\n            body, \r\n            isAnon\r\n        })\r\n\r\n        await loadMessage()\r\n    }\r\n\r\n    return {\r\n        inbox,\r\n        sent,\r\n        loading,\r\n        sendMessage: send,\r\n        refresh: loadMessage\r\n    }\r\n\r\n}\r\n\r\ntype UseCurrentMessageResult = {\r\n    message: Message | null,\r\n    loading: boolean\r\n}\r\nexport function useCurrentMessage(\r\n    userId: string | null, \r\n    messageId: string | null\r\n): UseCurrentMessageResult {\r\n    const [message, setMessage] = useState<Message | null>(null)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (!userId || !messageId) return\r\n\r\n        const loadMessage = async () => {\r\n            setLoading(true)\r\n            try{\r\n                const data = await getCurrentMessage(messageId, userId)\r\n                setMessage(data)\r\n            } catch (error) {\r\n                console.error(\"Error loading messages:\", error)\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        loadMessage()\r\n\r\n    }, [userId, messageId])\r\n\r\n    return {\r\n        message,\r\n        loading\r\n    }\r\n}\r\n\r\n\r\n\r\ntype Dialog = {\r\n    userId: string,\r\n    displayId: string,\r\n\r\n    lastMessage: Message,\r\n    messages: Message[],\r\n    count: number\r\n}\r\n\r\nexport function useDialogs(\r\n    inboxMessages: Message[],\r\n    sentMessages: Message[],\r\n    myUserId: string\r\n) {\r\n    const dialogs = useMemo<Dialog[]>(() => {\r\n        const map = new Map<string, Dialog>()\r\n\r\n        const allMessages = [...inboxMessages, ...sentMessages]\r\n\r\n        for (const msg of allMessages){\r\n            const dialogUserId = msg.from_user === myUserId\r\n                ? msg.to_user\r\n                : msg.from_user\r\n\r\n            let displayId = ''\r\n            if(msg.from_display_id === 'A'){\r\n                displayId = 'Anon'\r\n            } else{ \r\n                displayId = msg.from_display_id\r\n            }\r\n\r\n            if(!map.has(dialogUserId)) {\r\n                map.set(dialogUserId, {\r\n                    userId: dialogUserId,\r\n                    displayId: displayId,\r\n\r\n                    lastMessage: msg,\r\n                    messages: [msg],\r\n                    count: 1\r\n                })\r\n            } else{\r\n                const dialog = map.get(dialogUserId)!\r\n                dialog.messages.push(msg)\r\n                dialog.count++\r\n\r\n                if(\r\n                    new Date(msg.created_at) >\r\n                    new Date(dialog.lastMessage.created_at)\r\n                ){\r\n                    dialog.lastMessage = msg\r\n                }\r\n            }\r\n        }\r\n\r\n        return Array.from(map.values()).sort(\r\n            (a,b) =>\r\n                new Date(b.lastMessage.created_at).getTime() -\r\n                new Date(a.lastMessage.created_at).getTime()\r\n        )\r\n    }, [inboxMessages, sentMessages, myUserId])\r\n\r\n    return dialogs\r\n}","import { supabase } from \"@/utils/supabase/alSupabase\";\r\nimport { error } from \"console\";\r\nimport { ItemDto } from \"../types/type\";\r\n\r\nexport async function getInboxMessages(userId: string){\r\n    const {data, error} = await supabase\r\n        .from(\"messages_safe\")\r\n        .select(`\r\n            *\r\n            `)\r\n        .eq(\"to_user\", userId)\r\n        .order(\"created_at\", {ascending: true})\r\n    if(error) throw error;  \r\n\r\n    const messages = (data || []).map(msg => {\r\n        const anonSetting = msg.user_anonymous_settings?.[0]?.is_anon\r\n        return {\r\n            ...msg,\r\n            displayId: (anonSetting || msg.is_anon) ? \"Anon\" : msg.from_public_id,\r\n            username: (anonSetting || msg.is_anon) ? \"Anon\" : msg.from_username\r\n        }\r\n    })\r\n\r\n    return messages \r\n}\r\n\r\nexport async function getCurrentMessage(messageId: string, userId: string) {\r\n    const {data, error} = await supabase\r\n    .from(\"messages_safe\")\r\n    .select(\"*\")\r\n    .eq(\"id\", messageId)\r\n    .eq(\"to_user\", userId)\r\n    .single()\r\n    if (error) throw error\r\n    return data || []\r\n}\r\n\r\nexport async function getSentMessages(userId: string) {\r\n    const {data, error} = await supabase\r\n        .from('messages_safe')\r\n        .select(`\r\n            *`)\r\n        .eq(\"from_user\", userId)\r\n        .order(\"created_at\", {ascending: true})\r\n    \r\n    if(error) throw error\r\n    return data || []\r\n\r\n}\r\n\r\nexport async function sendMessage({\r\n    fromUserId,\r\n    toUserId,\r\n    toPublicId,\r\n    body,\r\n    isAnon\r\n}: {\r\n    fromUserId: string,\r\n    toUserId?: string,\r\n    toPublicId?: string,\r\n    body: ItemDto[],\r\n    isAnon?: boolean\r\n}) {\r\n    let receiverId = toUserId\r\n\r\n    if (!receiverId){\r\n        if (!toPublicId) throw new Error(\"Не указан пользователь, малыш\")\r\n            const {data: receiver, error: userError} = await supabase\r\n                .from(\"users\") \r\n                .select(\"id_user\")\r\n                .eq(\"public_id\", toPublicId)\r\n                .single()\r\n            if(userError || !receiver){\r\n                throw new Error(\"Пользователь не найден, кись\")\r\n            }\r\n        receiverId = receiver.id_user\r\n    }\r\n\r\n    const {error: settingError} = await supabase\r\n        .from(\"user_anonymous_settings\")\r\n        .upsert(\r\n            [{\r\n                from_user_id: fromUserId,\r\n                to_user_id: receiverId,\r\n                is_anon: isAnon\r\n            }], \r\n            { \r\n                onConflict: 'from_user_id,to_user_id'\r\n            }\r\n        );\r\n    if(settingError) throw settingError\r\n\r\n    const {error: messageError} = await supabase\r\n        .from(\"messages\")\r\n        .insert({\r\n            from_user: fromUserId,\r\n            to_user: receiverId,\r\n            body,\r\n        })\r\n    if(messageError) throw messageError\r\n}","\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { getCurrentUser, getUserProfile, onAuthStateChange } from \"../utils/auth\"\r\n\r\nexport function useAuth() {\r\n    const [user, setUser] = useState<any>(null)\r\n    const [profile, setProfile] = useState<any>(null)\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        const loadUser = async () => {\r\n            try {\r\n                const userData = await getCurrentUser()\r\n                setUser(userData)\r\n\r\n                if(userData) {\r\n                    const profileData = await getUserProfile(userData.id)\r\n                    setProfile(profileData)\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error loading user:\", error)\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        loadUser()\r\n\r\n        const subscription = onAuthStateChange(async (newUser) => {\r\n            setUser(newUser)\r\n            if (newUser) {\r\n                const profileData = await getUserProfile(newUser.id)\r\n                setProfile(profileData)\r\n            } else {\r\n                setProfile(null)\r\n            }\r\n        })\r\n\r\n        return () => {\r\n            subscription.unsubscribe()\r\n        }\r\n    },[])\r\n\r\n    return {user,profile,loading}\r\n}","import { supabase } from \"@/utils/supabase/alSupabase\";\r\n\r\nexport async function getCurrentUser() {\r\n    const {data, error} = await supabase.auth.getUser()\r\n    if(error) return\r\n    return data.user\r\n}\r\n\r\nexport async function getUserProfile(userId: string) {\r\n    const {data, error} = await supabase\r\n        .from(\"users\")\r\n        .select(\"public_id, username\")\r\n        .eq(\"id_user\", userId)\r\n        .single()\r\n    if(error) return null\r\n    return data\r\n}\r\n\r\nexport async function sighOut() {\r\n    const {error} = await supabase.auth.signOut()\r\n    if(error) throw error\r\n}\r\n\r\nexport function onAuthStateChange(callback: (user:any) => void) {\r\n    const {data: listener} = supabase.auth.onAuthStateChange((event,session) => {\r\n        callback(session?.user || null)\r\n    })\r\n    return listener.subscription\r\n}","\"use client\"\r\n\r\nimport { useState,useEffect, useRef } from \"react\"\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { useRouter } from \"next/navigation\";\r\n\r\nimport { useRandColor } from \"./useRandColor\";\r\nimport { useMessages } from \"../things/hooks/useMessages\";\r\nimport { useAuth } from \"../things/hooks/useAuth\";\r\nimport { Item } from \"../things/types/type\";\r\n\r\nimport { createText } from \"./btnFunction\";\r\nimport { userItemInteractions } from \"./useItemInteractions\";\r\n\r\n\r\ntype MessageData = {\r\n    items: Item[]\r\n}\r\n\r\nexport default function CreateCardPage({initialData}: {initialData?: MessageData}) {\r\n    const searchParams = useSearchParams()\r\n    const rawTo = searchParams.get(\"to\")\r\n    const to = rawTo ? decodeURIComponent(rawTo) : null\r\n    const [messageId, setMessageId] = useState<string | null>(null) // получаем из url\r\n    const [isReply, setIsReply] = useState(false)\r\n\r\n\r\n    const {user, profile, loading: authLoading} = useAuth();\r\n    const {inbox, sent, sendMessage: send, loading: messageLoading} = useMessages(user?.id || null);\r\n    const router = useRouter()\r\n\r\n    const [items, setItems] = useState<Item[]>(initialData?.items || [])\r\n    const fieldRef = useRef<HTMLDivElement>(null)\r\n\r\n    const [rightPanelOpen, setRightPanelOpen] = useState(false)\r\n    const idRef = useRef<HTMLInputElement>(null)\r\n    const anonRef = useRef<HTMLInputElement>(null)\r\n    const [isAnon, setIsAnon] = useState(false)\r\n\r\n    const [ismenuTextOpen, setMenuTextOpen] = useState(false)\r\n\r\n    const {startDrag, startResize, deleteItem} = userItemInteractions(items, setItems, fieldRef)\r\n\r\n    useEffect(() => {\r\n        if (to){\r\n            setMessageId(to)\r\n            setIsReply(true)\r\n        };\r\n    },[to])\r\n\r\n    \r\n\r\n        \r\n\r\n    // рандомный фон\r\n    const {bg} = useRandColor()\r\n    const bgStyle = `rgba(${Math.floor(bg.r)}, ${Math.floor(bg.g)}, ${Math.floor(bg.b)}, ${bg.a})`\r\n\r\n    const handleSendMessage = async () => {\r\n        const id = idRef.current?.value || \"\"\r\n        const anonCheckbox = anonRef.current?.checked || false\r\n\r\n        if (!id){\r\n            alert('Введи ID, сладкий!')\r\n            return\r\n        }\r\n        const cleanItems = items.map(({isSelected, isEditing, ...rest}) => rest)\r\n        console.log(\"SEND PAYLOAD\", cleanItems)\r\n        \r\n        try {\r\n            await send({publicId: id}, cleanItems, isAnon)\r\n\r\n            idRef.current!.value = \"\"\r\n            setRightPanelOpen(false)\r\n        } catch (error: any) {\r\n            console.log(error.message || 'Error sending message');\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    return (\r\n        <div \r\n            className={`relative flex flex-col justify-center items-center h-full`}\r\n            style={{ \r\n                backgroundColor: bgStyle\r\n            }}\r\n        >\r\n            {/* field */}\r\n            <div\r\n                className={`relative border w-1/2 h-1/2 rounded-md bg-white overflow-hidden z-10 `}\r\n                ref={fieldRef}\r\n                onMouseDown={(e) =>{\r\n                    if(e.target !== e.currentTarget) return;\r\n                    setItems(prev => prev.map(it => ({...it, isSelected: false, isEditing: 'none'})))\r\n                }}\r\n            >\r\n                {items.map((item,i) => (\r\n                    <div \r\n                        key={item.id}\r\n                        className={`flex \r\n                                text-black select-none relative \r\n                                ${item.isSelected && item.isEditing !== 'text' ? \"border\": \"\"}\r\n                                `}\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            left: item.x,\r\n                            top: item.y,\r\n                            width: item.w,\r\n                            height: item.h,\r\n                            fontSize: item.fontSize,\r\n                            cursor: item.isSelected ? \"move\" : \"pointer\",\r\n                        }}\r\n                    onDoubleClick={() => {\r\n                        setItems(prev => prev.map(it => it.id === item.id ? {...it, isEditing: \"text\"} : it))\r\n                    }}\r\n                    onMouseDown={(e) => {\r\n                        startDrag(e,item)\r\n                        setItems(prev => prev.map(it => ({...it, isSelected: it.id === item.id})))\r\n                    }}\r\n                    \r\n                    >\r\n                        {item.isEditing === \"text\" \r\n                        ?(\r\n                            <input\r\n                                autoFocus\r\n                                value={item.content}\r\n                                onChange={(e) => {\r\n                                    setItems(prev => prev.map(it => it.id === item.id \r\n                                        ? {...it, content: e.target.value} \r\n                                        : it))\r\n                                }}\r\n                                onBlur={() => {\r\n                                    setItems(prev => prev.map(it => it.id === item.id \r\n                                        ? {...it, isEditing: 'none'}\r\n                                        : it\r\n                                    ))\r\n                                }}\r\n                                onKeyDown={(e) => {\r\n                                    if(e.key === \"Enter\") e.currentTarget.blur()\r\n                                }}\r\n                            >\r\n                            \r\n                            </input>\r\n\r\n                        ): (\r\n                            <div className={`relative w-full h-full text-wrap wrap-break-word flex \r\n                                            ${item.isSelected ? \" \" : \"overflow-hidden\" }`}> \r\n                                {item.content}\r\n\r\n                                {item.isSelected && (\r\n                                    <div className=\"\">\r\n\r\n                                        {/* menu */}\r\n                                        <div\r\n                                            className=\"absolute -top-1.5 -right-2.5 \"\r\n                                        >   \r\n                                            <div className=\"relative\"> \r\n                                                <svg \r\n                                                    onClick={(e) => {\r\n                                                        if(ismenuTextOpen) setMenuTextOpen(false);\r\n                                                        else setMenuTextOpen(true)\r\n                                                        e.stopPropagation()\r\n                                                    }}\r\n                                                    className=\"hover:scale-110 transition-transform cursor-pointer\"\r\n                                                    xmlns=\"http://www.w3.org/2000/svg\" width=\"10\" height=\"10\" viewBox=\"0 0 32 32\"><path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M4 8h24M4 16h24M4 24h24\"/></svg>\r\n                                                <div\r\n                                                    className={`absolute top-1 left-full text-[9px] bg-black/20 rounded-md w-15 h-15 flex flex-col\r\n                                                        ${ismenuTextOpen ? \"opacity-100\" : \"opacity-0\"} transition-opacity`}\r\n                                                >\r\n                                                    <button \r\n                                                        className=\"hover:bg-black/10 transition-colors\" \r\n                                                        onClick={() => {deleteItem(item)}}>\r\n                                                        Удалить\r\n                                                    </button>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n\r\n                                        {/* resize */}\r\n                                        <div \r\n                                            onMouseDown={(e) => {\r\n                                                e.stopPropagation()\r\n                                                startResize(e, item, \"horizontal\")\r\n                                            }}\r\n                                            className=\"absolute -right-1 bottom-1/2 translate-y-1/2 w-1 h-3 bg-white \r\n                                                    border cursor-w-resize\"> \r\n\r\n                                        </div>\r\n\r\n                                        <div \r\n                                            onMouseDown={(e) => {\r\n                                                e.stopPropagation()\r\n                                                startResize(e, item, \"top\")\r\n                                            }}\r\n                                            className=\"absolute -top-1 left-1/2 -translate-x-1/2 w-3 h-1 bg-white \r\n                                                    border cursor-s-resize\"> \r\n\r\n                                        </div>\r\n\r\n                                        <div \r\n                                            onMouseDown={(e) => {\r\n                                                e.stopPropagation()\r\n                                                startResize(e, item, \"bottom\")\r\n                                            }}\r\n                                            className=\"absolute -bottom-1 left-1/2 -translate-x-1/2 w-3 h-1 bg-white \r\n                                                    border cursor-s-resize\"> \r\n\r\n                                        </div>\r\n\r\n                                        <div \r\n                                            onMouseDown={(e) => {\r\n                                                e.stopPropagation()\r\n                                                startResize(e, item, \"diagonal\")\r\n                                            }}\r\n                                            className=\"absolute -bottom-1.5 -right-1.5  w-2 h-2 bg-white \r\n                                                    border cursor-se-resize\"> \r\n\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"flex p-2 mt-10\">\r\n\r\n                <button\r\n                    className=\"p-2 border rounded-2xl\"  \r\n                    onClick={() => createText(setItems)}\r\n                >\r\n                    Text\r\n                </button>\r\n\r\n            </div>\r\n\r\n            {/* кнопка назад */}\r\n            <div\r\n                className=\"absolute left-0 inset-y-0 flex justify-center items-center \r\n                w-7 rounded-r-full bg-white/10 hover:bg-white/20 transition-cursor\"\r\n            >\r\n                <button \r\n                    onClick={() => router.push(\"anonlovemain\")}\r\n                    className=\"w-full h-full\">\r\n                    {`<`}\r\n                </button>\r\n            </div>\r\n\r\n            {/* поле сохранить */}\r\n            <div\r\n                className=\"absolute right-0 inset-y-0 flex justify-center items-center\r\n                w-7 rounded-l-full bg-white/10 hover:bg-white/20 transition-cursor\"\r\n            >\r\n                <button \r\n                    onClick={() => {setRightPanelOpen(true)}}\r\n                    className=\"w-full h-full\">\r\n                    {`...`}\r\n                </button>\r\n\r\n                    <div\r\n                        className={`fixed inset-0 z-30 bg-black/50 transition-all duration-300\r\n                                ${rightPanelOpen ? \"backdrop-blur-lg translate-x-0\" : \"backdrop-blur-none translate-x-full\"}\r\n                            `}\r\n                        onMouseDown={(e) => setRightPanelOpen(false)}\r\n                    >\r\n                        <div \r\n                            className=\"absolute right-0 inset-y-0 flex justify-center items-center w-[400px] bg-black/90 z-20\"\r\n                            onMouseDown={(e) => {\r\n                                e.stopPropagation()\r\n                            }}\r\n                        >   \r\n                            <form \r\n                                className=\"relative flex flex-col w-full justify-center items-center\"\r\n                                onSubmit={(e) => {\r\n                                    e.preventDefault()\r\n                                }}\r\n                                >\r\n                                <input\r\n                                    ref={idRef}\r\n                                    value={messageId || ''}\r\n                                    onChange={(e) => setMessageId(e.target.value)}\r\n                                    disabled={isReply}\r\n                                    type=\"text\"\r\n                                    placeholder=\"ID кисы\"\r\n                                    className={`p-2 mb-4 w-1/2 bg-white/10 border rounded-md text-white\r\n                                            ${isReply && \"opacity-50\"}\r\n                                    `}\r\n                                />\r\n                                <div className=\"flex w-full justify-center items-center\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        ref={anonRef}\r\n                                        checked={isAnon}\r\n                                        onChange={(e) => {setIsAnon}}\r\n                                        className=\"bg-white/10 border rounded-md text-white\"\r\n                                    />\r\n                                    <span className=\"text-[10px]\">{`Будешь анонимен? (потом можно изменить)`}</span>\r\n                                </div>\r\n\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"p-2 mt-4 border rounded-2xl hover:bg-white/20 transition-all duration-200\"\r\n                                    onClick={handleSendMessage}\r\n                                >\r\n                                    Отправить\r\n                                </button>\r\n\r\n                                <button \r\n                                    className=\"absolute left-0 w-10 h-20 bg-white/20 rounded-r-full top-1/2 -translate-y-1/2\r\n                                    hover:bg-white/40 transition-all duration-200\r\n                                    \"\r\n                                    onClick={() => setRightPanelOpen(false)}\r\n                                >\r\n                                    {`>`}\r\n                                </button>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n            </div>\r\n\r\n\r\n        </div>\r\n    )\r\n}","\"use client\"\r\n\r\nimport { useState,useEffect, useRef } from \"react\"\r\n\r\ntype Color = {r: number, g: number, b: number, a: number}\r\nconst lerp = (a: number, b: number, t: number) => {\r\n    return a + (b - a) * t\r\n}\r\nconst smoothStep = (t: number) => {\r\n    return t * t * (3 - 2 * t)\r\n}\r\nconst mixColor = (from: Color, to: Color, t: number): Color => {\r\n    const k = smoothStep(t)\r\n    return{\r\n        r: lerp(from.r, to.r, k),\r\n        g: lerp(from.g, to.g, k),\r\n        b: lerp(from.b, to.b, k),\r\n        a: lerp(from.a, to.a, k),\r\n    }\r\n}\r\nconst randomColor = (): Color => {\r\n    return {\r\n        r: Math.floor(Math.random() * 256),\r\n        g: 0,\r\n        b: 0,\r\n        a: 0.1\r\n    }\r\n}\r\n\r\nexport function useRandColor() {\r\n    const [bg, setBg] = useState<Color>({r: 0, g: 0, b: 0, a: 0.1})\r\n    const colorRef = useRef<Color>(bg)\r\n    const frameRef = useRef<number | null>(null)\r\n\r\n\r\n    useEffect(() => {\r\n        let start: number | null = null\r\n        let from = colorRef.current\r\n        let to = randomColor()\r\n        const duration = 3000 \r\n\r\n        const animate = (time: number) => {\r\n            if (!start) start = time\r\n            const t = Math.min((time - start) / duration, 1)\r\n            const next = mixColor(from, to, t)\r\n\r\n            colorRef.current = next\r\n            setBg(next)\r\n\r\n            if (t < 1) {\r\n                frameRef.current = requestAnimationFrame(animate)\r\n            } else{\r\n                from = to\r\n                to = randomColor()\r\n                start = null\r\n                frameRef.current = requestAnimationFrame(animate)\r\n            }\r\n        }\r\n        frameRef.current = requestAnimationFrame(animate)\r\n\r\n        return () => {\r\n            if (frameRef.current) cancelAnimationFrame(frameRef.current)\r\n        }\r\n    },[])\r\n\r\n    return {\r\n        bg\r\n    }\r\n}","\r\nimport React from \"react\"\r\nimport { Item } from \"../things/types/type\"\r\n\r\nexport const createText = (setItems: React.Dispatch<React.SetStateAction<Item[]>>) => {\r\n        setItems(prev => [...prev, {\r\n            id: prev.length,\r\n            type: \"text\",\r\n            content: `new text ${prev.length + 1}`,\r\n            x: 0 ,\r\n            y: 0 + prev.length * 20,\r\n            w: 100,\r\n            h: 50,\r\n            fontSize: 16,\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            rotation: 0,\r\n            isEditing: 'none'\r\n        }])\r\n    }","import { Item } from \"../things/types/type\"\r\nimport { useRef }from \"react\"\r\n\r\ntype ResizeDirection = \"horizontal\" | \"top\" | \"bottom\" | \"diagonal\"\r\n\r\ntype DragRef = {\r\n    id: number | null\r\n    offsetX: number\r\n    offsetY: number\r\n    w: number\r\n    h: number\r\n}\r\n\r\ntype ResizeRef = {\r\n    id: number | null\r\n    startX: number\r\n    startY: number\r\n    startW: number\r\n    startH: number\r\n    fontSize?: number\r\n    direction: ResizeDirection\r\n}\r\n\r\nexport const userItemInteractions = (items: Item[], setItems: React.Dispatch<React.SetStateAction<Item[]>>, fieldRef: React.RefObject<HTMLDivElement | null>) => {\r\n    const dragRef = useRef<DragRef>({id: null, offsetX: 0, offsetY: 0, w: 0, h: 0})\r\n    const resizeRef = useRef<ResizeRef>({id: null, startX: 0, startY: 0, startW: 0, startH: 0, fontSize: 0, direction: \"horizontal\"})\r\n\r\n    const startDrag = (e: React.MouseEvent<HTMLDivElement>, item: Item) => {\r\n        const rect = fieldRef!.current!.getBoundingClientRect()\r\n        dragRef.current = {\r\n            id: item.id,\r\n            offsetX: e.clientX - rect.left - item.x,\r\n            offsetY: e.clientY - rect.top - item.y,\r\n            w: item.w,\r\n            h: item.h\r\n        }\r\n        window.addEventListener('mousemove', onDragMove)\r\n        window.addEventListener('mouseup', stopDrag)\r\n    }\r\n\r\n    const onDragMove = (e: MouseEvent) => {\r\n        if(resizeRef.current.id !== null) return;\r\n        const rect = fieldRef!.current!.getBoundingClientRect()\r\n        const drag = dragRef.current\r\n        if (drag.id === null) return;\r\n\r\n        let x = e.clientX - rect.left - drag.offsetX\r\n        let y = e.clientY - rect.top - drag.offsetY\r\n        x = Math.max(-drag.w/2, Math.min(x, rect.width - drag.w/2))\r\n        y = Math.max(-drag.h/2, Math.min(y, rect.height - drag.h/2))\r\n\r\n        setItems(prev => prev.map(it => it.id === drag.id ? {...it, x, y} : it))\r\n    }\r\n\r\n    const stopDrag = () => {\r\n        dragRef.current.id = null\r\n        window.removeEventListener('mousemove', onDragMove)\r\n        window.removeEventListener('mouseup', stopDrag)\r\n    }\r\n\r\n\r\n    //resize\r\n    const startResize = (e: React.MouseEvent<HTMLDivElement>, item: Item, direction: ResizeDirection) => {\r\n        e.stopPropagation()\r\n        resizeRef.current = {\r\n            id: item.id,\r\n            startX: e.clientX,\r\n            startY: e.clientY,\r\n            startW: item.w,\r\n            startH: item.h,\r\n            fontSize: item.fontSize,\r\n            direction: direction\r\n        }\r\n        window.addEventListener('mousemove', onResizeMove)\r\n        window.addEventListener('mouseup', stopResize)\r\n    }\r\n\r\n    const onResizeMove = (e: MouseEvent) => {\r\n        const r = resizeRef.current\r\n        if (r.id === null) return;\r\n\r\n        const dx = e.clientX - r.startX\r\n        const dy = e.clientY - r.startY\r\n\r\n        let w = r.startW\r\n        let h = r.startH\r\n        let fontSize = r.fontSize\r\n\r\n        if (r.direction === \"horizontal\") {\r\n            w = Math.max(50, r.startW + dx);\r\n        }\r\n        if(r.direction === \"top\") {\r\n            h = Math.max(30, r.startH + dy);\r\n        }\r\n        if (r.direction === \"bottom\") {\r\n            h = Math.max(30, r.startH + dy);\r\n        }\r\n        if (r.direction === \"diagonal\") {\r\n            w = Math.max(50, r.startW + dx);\r\n            h = Math.max(30, r.startH + dy);\r\n            fontSize = Math.max(2, r.fontSize! + (dx+dy) / 5);\r\n        }\r\n\r\n        console.log(\"resize direction:\", r.direction, \"w:\", w, \"h:\", h, \"fontSize:\", fontSize)\r\n        setItems(prev => prev.map(it => it.id === r.id ? {...it, w, h, fontSize} : it))\r\n    }\r\n\r\n    const stopResize = () => {\r\n        resizeRef.current.id = null\r\n        window.removeEventListener('mousemove', onResizeMove)\r\n        window.removeEventListener('mouseup', stopResize)\r\n    }\r\n\r\n\r\n\r\n    //delete\r\n    const deleteItem = (item: Item) => {\r\n        setItems(prev => prev.filter(it => it.id !== item.id))\r\n    }\r\n\r\n    return {startDrag, startResize, deleteItem}\r\n}"],"names":["module","exports","require","vendored","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}