{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../node_modules/next/src/server/route-modules/app-page/module.compiled.js","../../../../node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","../../../../app/anonlove/things/hooks/useAuth.ts","../../../../app/anonlove/things/utils/auth.ts","../../../../app/anonlove/things/utils/messages.ts","../../../../app/anonlove/things/types/type.ts","../../../../app/anonlove/things/hooks/useMessages.ts","../../../../app/anonlove/things/hooks/checkMobile.ts","../../../../app/anonlove/anonlovemain/page.tsx","../../../../app/anonlove/things/hooks/useSwipe.ts"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { getCurrentUser, getUserProfile, onAuthStateChange } from \"../utils/auth\"\r\n\r\nexport function useAuth() {\r\n    const [user, setUser] = useState<any>(null)\r\n    const [profile, setProfile] = useState<any>(null)\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        const loadUser = async () => {\r\n            try {\r\n                const userData = await getCurrentUser()\r\n                setUser(userData)\r\n\r\n                if(userData) {\r\n                    const profileData = await getUserProfile(userData.id)\r\n                    setProfile(profileData)\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error loading user:\", error)\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        loadUser()\r\n\r\n        const subscription = onAuthStateChange(async (newUser) => {\r\n            setUser(newUser)\r\n            if (newUser) {\r\n                const profileData = await getUserProfile(newUser.id)\r\n                setProfile(profileData)\r\n            } else {\r\n                setProfile(null)\r\n            }\r\n        })\r\n\r\n        return () => {\r\n            subscription.unsubscribe()\r\n        }\r\n    },[])\r\n\r\n    return {user,profile,loading}\r\n}","import { supabase } from \"@/utils/supabase/alSupabase\";\r\n\r\nexport async function getCurrentUser() {\r\n    const {data, error} = await supabase.auth.getUser()\r\n    if(error) return\r\n    return data.user\r\n}\r\n\r\nexport async function getUserProfile(userId: string) {\r\n    const {data, error} = await supabase\r\n        .from(\"users\")\r\n        .select(\"public_id, username\")\r\n        .eq(\"id_user\", userId)\r\n        .single()\r\n    if(error) return null\r\n    return data\r\n}\r\n\r\nexport async function sighOut() {\r\n    const {error} = await supabase.auth.signOut()\r\n    if(error) throw error\r\n}\r\n\r\nexport function onAuthStateChange(callback: (user:any) => void) {\r\n    const {data: listener} = supabase.auth.onAuthStateChange((event,session) => {\r\n        callback(session?.user || null)\r\n    })\r\n    return listener.subscription\r\n}","import { supabase } from \"@/utils/supabase/alSupabase\";\r\nimport { error } from \"console\";\r\nimport { ItemDto } from \"../types/type\";\r\n\r\nexport async function getInboxMessages(userId: string){\r\n    const {data, error} = await supabase\r\n        .from(\"messages_safe\")\r\n        .select(`\r\n            *\r\n            `)\r\n        .eq(\"to_user\", userId)\r\n        .order(\"created_at\", {ascending: true})\r\n    if(error) throw error;  \r\n\r\n    const messages = (data || []).map(msg => {\r\n        const anonSetting = msg.user_anonymous_settings?.[0]?.is_anon\r\n        return {\r\n            ...msg,\r\n            displayId: (anonSetting || msg.is_anon) ? \"Anon\" : msg.from_public_id,\r\n            username: (anonSetting || msg.is_anon) ? \"Anon\" : msg.from_username\r\n        }\r\n    })\r\n\r\n    return messages \r\n}\r\n\r\nexport async function getCurrentMessage(messageId: string, userId: string, isMine?: string | null) {\r\n    console.log('Querying message:', { messageId, userId })\r\n    const {data, error} = await supabase\r\n    .from(\"messages_safe\")\r\n    .select(\"*\")\r\n    .eq(\"id\", messageId)\r\n    .eq(isMine===\"true\" ? \"from_user\" : \"to_user\", userId)\r\n    .maybeSingle()\r\n    console.log('Query result:', { data, error })\r\n    if (error) throw error\r\n    return data || []\r\n}\r\n\r\nexport async function getSentMessages(userId: string) {\r\n    const {data, error} = await supabase\r\n        .from('messages_safe')\r\n        .select(`\r\n            *`)\r\n        .eq(\"from_user\", userId)\r\n        .order(\"created_at\", {ascending: true})\r\n    \r\n    if(error) throw error\r\n    return data || []\r\n\r\n}\r\n\r\nexport async function sendMessage({\r\n    fromUserId,\r\n    toUserId,\r\n    toPublicId,\r\n    body,\r\n    isAnon\r\n}: {\r\n    fromUserId: string,\r\n    toUserId?: string,\r\n    toPublicId?: string,\r\n    body: ItemDto[],\r\n    isAnon?: boolean\r\n}) {\r\n    let receiverId = toUserId\r\n\r\n    if (!receiverId){\r\n        if (!toPublicId) throw new Error(\"Не указан пользователь, малыш\")\r\n            const {data: receiver, error: userError} = await supabase\r\n                .from(\"users\") \r\n                .select(\"id_user\")\r\n                .eq(\"public_id\", toPublicId)\r\n                .single()\r\n            if(userError || !receiver){\r\n                throw new Error(\"Пользователь не найден, кись\")\r\n            }\r\n        receiverId = receiver.id_user\r\n    }\r\n\r\n    const {error: settingError} = await supabase\r\n        .from(\"user_anonymous_settings\")\r\n        .upsert(\r\n            [{\r\n                from_user_id: fromUserId,\r\n                to_user_id: receiverId,\r\n                is_anon: isAnon\r\n            }], \r\n            { \r\n                onConflict: 'from_user_id,to_user_id'\r\n            }\r\n        );\r\n    if(settingError) throw settingError\r\n\r\n    const {error: messageError} = await supabase\r\n        .from(\"messages\")\r\n        .insert({\r\n            from_user: fromUserId,\r\n            to_user: receiverId,\r\n            body,\r\n        })\r\n    if(messageError) throw messageError\r\n}","export type Item = {\r\n    id: number;\r\n    type: \"text\",\r\n    content: string,\r\n    x: number,\r\n    y: number,\r\n    w: number,\r\n    h: number,\r\n    fontSize?: number,\r\n    scaleX?: number,\r\n    scaleY?: number,\r\n    rotation?: number,\r\n    isEditing: string,\r\n    isSelected?: boolean\r\n}\r\n\r\nexport type ItemDto = {\r\n    id: number;\r\n    type: \"text\",\r\n    content: string,\r\n    x: number,\r\n    y: number,\r\n    w: number,\r\n    h: number,\r\n    fontSize?: number,\r\n    scaleX?: number,\r\n    scaleY?: number,\r\n    rotation?: number,\r\n}\r\nexport function itemDtoToItem(dto: ItemDto): Item {\r\n    return {\r\n        ...dto, \r\n        isEditing: 'none', \r\n        isSelected: false\r\n    }\r\n}\r\nexport function itemDtoListToItems(dtos: ItemDto[]): Item[] {\r\n  return dtos.map(itemDtoToItem)\r\n}\r\n\r\nexport type Message = {\r\n    id: string,\r\n    body: ItemDto[],\r\n    created_at: string,\r\n    is_anon: boolean,\r\n    \r\n    from_user: string,\r\n    to_user: string,\r\n    from_display_id: string,\r\n    to_display_id: string,\r\n}\r\n\r\nexport type UiMessage = Omit<Message, \"body\"> & {\r\n    body: Item[]\r\n}\r\n\r\nexport type Viewport ={\r\n    scale: number,\r\n    offsetX: number,\r\n    offsetY: number\r\n}","\"use client\"\r\n\r\nimport { useState, useEffect, useMemo } from \"react\"\r\nimport { getInboxMessages, getSentMessages, sendMessage, getCurrentMessage } from \"../utils/messages\"\r\nimport { ItemDto, Item, Message, UiMessage, itemDtoListToItems } from \"../types/type\"\r\n\r\n\r\n\r\nexport function useMessages(userId: string | null) {\r\n    const [inbox, setInbox] = useState<any[]>([])\r\n    const [sent, setSent] = useState<any[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n\r\n    const loadMessage = async () => {\r\n        if(!userId) return\r\n\r\n        try{\r\n            setLoading(true)\r\n            const [inboxData, sentData] = await Promise.all([\r\n                getInboxMessages(userId), \r\n                getSentMessages(userId)\r\n            ])\r\n\r\n            setInbox(inboxData)\r\n            setSent(sentData)\r\n        } catch (error) {\r\n            console.error(\"Error loading messages:\", error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadMessage()\r\n    },[userId])\r\n\r\n    const send = async (\r\n        to: {publicId?: string, userId?: string}, \r\n        body: ItemDto[],\r\n        isAnon?: boolean \r\n    ) => {\r\n        if(!userId) throw new Error(\"User not logged in\")\r\n        \r\n        await sendMessage({\r\n            fromUserId: userId,\r\n            toUserId: to.userId,\r\n            toPublicId: to.publicId, \r\n            body, \r\n            isAnon\r\n        })\r\n\r\n        await loadMessage()\r\n    }\r\n\r\n    return {\r\n        inbox,\r\n        sent,\r\n        loading,\r\n        sendMessage: send,\r\n        refresh: loadMessage\r\n    }\r\n\r\n}\r\n\r\ntype UseCurrentMessageResult = {\r\n    message: UiMessage | null,\r\n    loading: boolean\r\n}\r\nexport function useCurrentMessage(\r\n    userId: string | null, \r\n    messageId: string | null,\r\n    isMine?: string | null\r\n): UseCurrentMessageResult {\r\n    const [message, setMessage] = useState<UiMessage | null>(null)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (!userId || !messageId) return\r\n\r\n        const loadMessage = async () => {\r\n            setLoading(true)\r\n            try{\r\n                const data = await getCurrentMessage(messageId, userId, isMine)\r\n                setMessage({\r\n                    ...data,\r\n                    body: itemDtoListToItems(data.body) \r\n                })\r\n            } catch (error) {\r\n                console.error(\"Error loading messages:\", error)\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        loadMessage()\r\n\r\n    }, [userId, messageId])\r\n\r\n    return {\r\n        message,\r\n        loading\r\n    }\r\n}\r\n\r\n\r\n\r\ntype Dialog = {\r\n    userId: string,\r\n    displayId: string,\r\n\r\n    lastMessage: Message,\r\n    messages: Message[],\r\n    count: number\r\n}\r\n\r\nexport function useDialogs(\r\n    inboxMessages: Message[],\r\n    sentMessages: Message[],\r\n    myUserId: string\r\n) {\r\n    const dialogs = useMemo<Dialog[]>(() => {\r\n        const map = new Map<string, Dialog>()\r\n\r\n        const allMessages = [...inboxMessages, ...sentMessages]\r\n\r\n        for (const msg of allMessages){\r\n            const dialogUserId = msg.from_user === myUserId\r\n                ? msg.to_user\r\n                : msg.from_user\r\n\r\n            let displayId = ''\r\n            if(msg.from_display_id === 'A'){\r\n                displayId = 'Anon'\r\n            } else{ \r\n                displayId = msg.from_display_id\r\n            }\r\n\r\n            if(!map.has(dialogUserId)) {\r\n                map.set(dialogUserId, {\r\n                    userId: dialogUserId,\r\n                    displayId: displayId,\r\n\r\n                    lastMessage: msg,\r\n                    messages: [msg],\r\n                    count: 1\r\n                })\r\n            } else{\r\n                const dialog = map.get(dialogUserId)!\r\n                dialog.messages.push(msg)\r\n                dialog.count++\r\n\r\n                if(\r\n                    new Date(msg.created_at) >\r\n                    new Date(dialog.lastMessage.created_at)\r\n                ){\r\n                    dialog.lastMessage = msg\r\n                }\r\n            }\r\n        }\r\n\r\n        return Array.from(map.values()).sort(\r\n            (a,b) =>\r\n                new Date(b.lastMessage.created_at).getTime() -\r\n                new Date(a.lastMessage.created_at).getTime()\r\n        )\r\n    }, [inboxMessages, sentMessages, myUserId])\r\n\r\n    return dialogs\r\n}","import { useEffect, useState } from \"react\";\r\n\r\nexport function useCheckMobile(breakPoint = 768) {\r\n    const [isMobile, setIsMobile] = useState(false)\r\n\r\n    useEffect(() => {\r\n        const check = () => {\r\n            setIsMobile(window.innerWidth <= 768)\r\n        }\r\n        check()\r\n        window.addEventListener('resize', check)\r\n        return () => window.removeEventListener('resize', check)\r\n    },[breakPoint])\r\n\r\n    return isMobile\r\n}","\"use client\"\r\n\r\nexport const dynamic = \"force-dynamic\";\r\n\r\nimport { useState, useEffect, useRef, use } from \"react\"\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useAuth } from \"../things/hooks/useAuth\";\r\nimport { useMessages, useDialogs } from \"../things/hooks/useMessages\";\r\nimport { sighOut } from \"../things/utils/auth\";\r\nimport { useSwipe } from \"../things/hooks/useSwipe\";\r\nimport { useCheckMobile } from \"../things/hooks/checkMobile\";\r\n\r\n\r\n\r\nexport default function Page() {\r\n    const router = useRouter();\r\n\r\n    const {user, profile, loading: authLoading} = useAuth();\r\n    \r\n    const {inbox, sent, sendMessage: send, loading: messageLoading} = useMessages(user?.id || null);\r\n\r\n    const dialogs = useDialogs(inbox, sent, user?.id || \"\");\r\n    const [activeDialogId, setActiveDialogId] = useState<string | null>(null);\r\n    const activeDialog = dialogs.find((d) => d.userId === activeDialogId);\r\n\r\n    const [openChat, setOpenChat] = useState(false);\r\n    const isMobile = useCheckMobile()\r\n\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const idRef = useRef<HTMLInputElement>(null);\r\n    const textRef = useRef<HTMLInputElement>(null);\r\n    const [isAnon, setIsAnon] = useState(false);\r\n\r\n    // ответ на сообщение\r\n    const [replyToUserId, setreplyToUserId] = useState<{id: string; isAnon: boolean} | null>(null); //id\r\n    const [isReply, setIsReply] = useState(false);\r\n\r\n    const [openProfile, setOpenProfile] = useState(false);\r\n\r\n    // свайп для мобилки\r\n    const chatSwipe = useSwipe({\r\n        onSwipeRight: () => {\r\n            if (!isMobile) return;\r\n            setOpenChat(false)\r\n        }\r\n    })\r\n    // swipe close profile mobile\r\n    const profileSwipe = useSwipe({\r\n        onSwipeLeft: () => {\r\n            if (!isMobile) return;\r\n            setOpenProfile(false)\r\n        },\r\n        onSwipeRight: () => {\r\n            if (!isMobile) return;\r\n            setOpenProfile(true)\r\n        }\r\n    })\r\n    \r\n    // автовставка id\r\n    useEffect(() => {\r\n        if (isOpen && idRef.current) {\r\n            idRef.current.value = replyToUserId?.id || ''\r\n        }\r\n    }, [isOpen, replyToUserId])\r\n\r\n    // редирект если неавторизован\r\n    useEffect(() => {\r\n        if (authLoading) return;\r\n\r\n        if(!user){\r\n            router.replace('/anonlove/auth')\r\n        }\r\n    }, [user, authLoading,router])\r\n\r\n    \r\n    \r\n\r\n    useEffect(() => {\r\n        if(!isMobile){\r\n            setOpenChat(false)\r\n        }\r\n    }, [isMobile])\r\n\r\n    \r\n    \r\n    \r\n    \r\n    const handleSignOut = async () => {\r\n        await sighOut()\r\n        router.push('/anonlove/auth')\r\n    }\r\n\r\n    if (authLoading) {\r\n        return (\r\n            <div className=\"bg-black min-h-screen flex items-center justify-center text-white\">\r\n                Загрузка...\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"relative bg-black min-h-screen flex flex-col overflow-hidden\">\r\n\r\n            {/* сообщения */}\r\n            <main \r\n                className=\"relative flex-1 text-white flex md:flex-row flex-col overflow-hidden\"\r\n                {...(!openChat ? profileSwipe : {})}\r\n                onClick={() => {\r\n                    if(openProfile) setOpenProfile(false)\r\n                }}\r\n            >\r\n                {/* ДИАЛОГИ */}\r\n                <div \r\n                    className={`absolute inset-0 bg-[#12080b] \r\n                            overflow-y-auto\r\n                            transition-transform duration-300 ease-out will-change-transform\r\n                            md:static md:translate-x-0 md:w-1/2\r\n                            ${isMobile && openChat ? \"-translate-x-full\" : \"translate-x-0\"}\r\n                        `}\r\n                    \r\n                    >\r\n\r\n                    <div className=\"flex w-full relative bg-white/10 backdrop-blur-md\">\r\n\r\n                        <div className=\"absolute left-2 top-1/2 -translate-y-1/2 rounded-full bg-white/10 h-8 w-15 flex justify-center items-center\">\r\n                            <button \r\n                                onClick={() => {setOpenProfile(true)}}\r\n                                className=\"bg-white/20 w-8 h-8 rounded-full\">\r\n                                {profile?.public_id.charAt(1).toUpperCase()}\r\n                            </button>\r\n                        </div>\r\n\r\n                        <button \r\n                            className=\" p-2 rounded-md w-full text-center flex justify-center items-center gap-1\"\r\n                        >\r\n                            <span className=\"medium\">Чаты</span>\r\n                            <span \r\n                                className={`w-3 h-3 rounded-full border transition bg-white border-white\r\n                                `}\r\n                            />\r\n                        </button>\r\n\r\n                        <div\r\n                            className=\"absolute bottom-1/2 translate-y-1/2 right-2\"\r\n                        >\r\n                           {/* кнопка написать */}\r\n                            <AnimatedButton\r\n                                openModal={() => {\r\n                                    router.push(`createcard?type=send`);\r\n                                }}\r\n                            >   \r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"14\" height=\"14\" viewBox=\"0 0 32 32\"><path fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M2 4h28v18H16l-8 7v-7H2Z\"/></svg>\r\n                            </AnimatedButton>\r\n                        </div>\r\n\r\n                    </div>\r\n\r\n                    {dialogs.map((dialog) => {\r\n                        const avatar = dialog.displayId.charAt(1).toUpperCase()\r\n                        const title = dialog.displayId\r\n                            \r\n                        return(\r\n                            <button\r\n                                key={dialog.userId}\r\n                                className=\"border border-[#8f18504e] p-2 rounded-lg w-full\"\r\n                                onClick={() => {setActiveDialogId(dialog.userId), setOpenChat(true)}}\r\n                            > \r\n                                <div className=\"flex p-2 items-center gap-2 relative\">\r\n                                    <span\r\n                                        className=\"flex bg-red-500 w-8 h-8 items-center justify-center rounded-full text-lg font-bold\"\r\n                                    >\r\n                                        {avatar}\r\n                                    </span>\r\n\r\n                                    <div className=\"\">\r\n                                        <span className=\"font-semibold\"\r\n                                        >\r\n                                            {title}\r\n                                        </span>\r\n\r\n                                        <span className=\"text-[10px] text-gray-400 absolute bottom-0 right-1 \">\r\n                                            {dialog.lastMessage.created_at.slice(11,16)}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </button>  \r\n                        )\r\n                    })}\r\n\r\n                    \r\n                </div>\r\n                \r\n                {/* ===== ЧАТ ===== */}\r\n                <div \r\n                    {...(isMobile ? chatSwipe : {})}\r\n                    className={`\r\n                        absolute inset-0 bg-[#12080b] \r\n                        overflow-y-auto\r\n                        transition-transform duration-300 ease-in-out will-change-transform\r\n                        md:static md:translate-x-0 md:w-1/2\r\n                        ${openChat ? \"translate-x-0\" : \"translate-x-full\"}\r\n                    `}>\r\n\r\n                    {/* Кнопка назад (ТОЛЬКО мобилка) */}\r\n                    {isMobile && (\r\n                        <button\r\n                            className=\" bg-white/10 backdrop-blur-2xl m-2 w-15 h-8 text-center rounded-full z-10\"\r\n                            onClick={() => setOpenChat(false)}\r\n                        >\r\n                            ← \r\n                        </button>\r\n                    )}\r\n                    \r\n\r\n                    {activeDialog?.messages.map(message => {\r\n                        const avatar = message.from_display_id.charAt(1).toUpperCase()\r\n                        const nameLabel = message.from_display_id\r\n                        const bodyText: any = \"тебе тут что то пришло, малышка\"\r\n                        const isMine = message.from_user === user?.id\r\n                        const messageId = message.from_display_id === \"Anon\" ? message.from_user : message.from_display_id\r\n\r\n                        return (\r\n                            <div\r\n                                key={message.id}\r\n                                className={`flex flex-col relative w-full transition hover:bg-white/10\r\n                                    ${isMine ? \"items-end\" : \"items-start\"}\r\n                                `}\r\n                            >\r\n                                <div\r\n                                    className={`flex items-center gap-2 p-2 cursor-pointer max-w-[80%]\r\n                                        ${isMine ? \"flex-row-reverse text-right\" : \"flex-row\"}\r\n                                    `}\r\n                                    onClick={() => {\r\n                                        router.push(`createcard?isMine=${isMine}&id=${encodeURIComponent(message.id)}&type=recieve&to=${encodeURIComponent(message?.from_display_id ?? '')}`)\r\n                                    }}\r\n                                >\r\n                                    {/* avatar */}\r\n                                    <div\r\n                                        className=\"md:w-10 md:h-10 w-8 h-8\r\n                                                rounded-full bg-red-500\r\n                                                flex items-center justify-center\r\n                                                text-lg font-bold shrink-0\"\r\n                                    >\r\n                                        {avatar}\r\n                                    </div>\r\n\r\n                                    {/* text */}\r\n                                    <div className=\"flex flex-col\">\r\n                                        <span className=\"font-semibold medium\">\r\n                                            {nameLabel}\r\n                                        </span>\r\n                                        <span className=\"small line-clamp-2\">\r\n                                            {``}\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                {/* reply button — только для чужих сообщений */}\r\n                                {!isMine && (\r\n                                    <button\r\n                                        className=\"absolute top-1/2 right-1 -translate-y-1/2\"\r\n                                        onClick={() => {\r\n                                            router.push(`createcard?isMine=${isMine}&type=send&to=${encodeURIComponent(message?.from_display_id ?? '')}`)\r\n\r\n                                        }}\r\n                                    >\r\n                                        <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"18\" viewBox=\"0 0 14 14\">\r\n                                            <g fill=\"none\" stroke=\"currentColor\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\r\n                                                <path d=\"M7.5.5h-5a1 1 0 0 0-1 1v9l-1 3l4-1h8a1 1 0 0 0 1-1v-5\"/>\r\n                                                <path d=\"m8.363 8.137l-3 .54l.5-3.04l4.73-4.71a.999.999 0 0 1 1.42 0l1.06 1.06a1.001 1.001 0 0 1 0 1.42z\"/>\r\n                                            </g>\r\n                                        </svg>\r\n                                    </button>\r\n                                )}\r\n\r\n                                <div className=\"w-full mx-auto bg-white/20 h-px\" />\r\n                            </div>\r\n                        )\r\n                    })}\r\n\r\n                    \r\n                </div>\r\n\r\n                \r\n            </main>\r\n\r\n            {/* profile left side */}\r\n\r\n            <div\r\n                {...(isMobile ? profileSwipe : {})}\r\n                className={`flex flex-1 flex-col items-center absolute bg-black/50 backdrop-blur-md transition-transform duration-150 ease-in-out will-change-transform\r\n                    ${openProfile ? \"translate-x-0\" : \"-translate-x-full \"}\r\n                    ${isMobile ? \"inset-0\" : \"w-1/3 h-full\"}\r\n                    `}\r\n                onClick={(e) => {\r\n                    e.stopPropagation()\r\n                }}\r\n            >\r\n                <div\r\n                    className=\"bg-white/20 backdrop-blur-2xl w-full flexC p-2 rounded-b-2xl\"\r\n                >\r\n                    {profile?.public_id} \r\n                </div>\r\n\r\n                <div className=\"absolute bottom-0 bg-white/10 p-2 backdrop-blur-md w-full flexC rounded-t-2xl\">\r\n                    <button\r\n                        className=\"text-red-500\"\r\n                        onClick={() => {\r\n                            handleSignOut()\r\n                        }}\r\n                    >\r\n                        Выйти\r\n                    </button>\r\n                </div>\r\n\r\n                <button\r\n                    className=\"absolute h-40 top-1/2 -translate-y-1/2 right-0 bg-white/20 backdrop-blur-2xl flexC p-1 \r\n                            animate-pulse rounded-l-2xl\r\n                    \"\r\n                    onClick={() => setOpenProfile(false)}\r\n                >\r\n                    {`>`}\r\n                </button>\r\n\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\n\r\nfunction AnimatedButton({ \r\n    children,\r\n    openModal \r\n}: {\r\n    children: React.ReactNode,\r\n    openModal: () => void\r\n\r\n}) {\r\n    const canvasRef = useRef<HTMLCanvasElement>(null);\r\n    const buttonRef = useRef<HTMLButtonElement>(null);\r\n    const animationRef = useRef<number>(0);\r\n    const isHovering = useRef(false);\r\n\r\n    const sizeRef = useRef({w:0,h:0})\r\n\r\n    useEffect(() => {\r\n        const canvas = canvasRef.current\r\n        const button = buttonRef.current\r\n        if(!canvas || !button) return;\r\n\r\n        const ctx = canvas.getContext(\"2d\");\r\n        if(!ctx) return;\r\n\r\n        const updateSize = () => {\r\n            const rect = canvas.parentElement!.getBoundingClientRect();\r\n            const dpr = window.devicePixelRatio || 1;\r\n\r\n            sizeRef.current.w = rect.width;\r\n            sizeRef.current.h = rect.height;\r\n\r\n            canvas.width = rect.width * dpr;\r\n            canvas.height = rect.height * dpr;\r\n            canvas.style.width = rect.width + \"px\"\r\n            canvas.style.height = rect.height + \"px\"\r\n            ctx.setTransform(dpr,0,0,dpr,0,0)\r\n        }\r\n        updateSize()\r\n\r\n        function getBtnCenter(){\r\n            const btn = button!.getBoundingClientRect()\r\n            const cvs = canvas!.getBoundingClientRect()\r\n            return{\r\n                x: cvs.width/2,\r\n                y: cvs.height/2\r\n            }\r\n        }\r\n\r\n        const particles: {\r\n            x: number,\r\n            y: number,\r\n            radius: number,\r\n            alpha: number,\r\n            life: number,\r\n            vx: number,\r\n            vy: number\r\n        }[] = []\r\n\r\n        const speed = 50\r\n        let lastTime = performance.now()\r\n\r\n        function animate(currentTime: number) {\r\n            if (!ctx || !canvas) return\r\n            const deltaTime = (currentTime - lastTime) / 1000\r\n            lastTime = currentTime\r\n\r\n            const {w , h} = sizeRef.current\r\n            ctx.clearRect(0,0, w, h)\r\n\r\n            \r\n            if(Math.random() < 0.06) {\r\n                const angle = Math.random() * Math.PI * 2\r\n                particles.push({\r\n                    x: Math.random() * w,\r\n                    y: Math.random() * h,\r\n                    radius: 1,\r\n                    alpha: 1,\r\n                    life: 1,\r\n                    vx: Math.cos(angle) * speed,\r\n                    vy: Math.sin(angle) * speed\r\n                })\r\n            }\r\n            const target = getBtnCenter()\r\n\r\n            for (let i = particles.length -1; i >= 0; i--) {\r\n                const p = particles[i];\r\n\r\n                p.life -= deltaTime * 0.3;\r\n                p.alpha = p.life\r\n                \r\n                if(isHovering.current) {\r\n                    const dx = target.x - p.x\r\n                    const dy = target.y - p.y\r\n                    const dist = Math.sqrt(dx * dx + dy * dy) + 0.001\r\n\r\n                    const force = Math.max(0, 1 - dist / 700) * 400;\r\n\r\n                    p.vx += (dx / dist) * force *deltaTime\r\n                    p.vy += (dy / dist) * force *deltaTime\r\n                } \r\n\r\n                // max speed\r\n                const speed = Math.hypot(p.vx, p.vy);\r\n                const maxSpeed = 160;\r\n                if (speed > maxSpeed) {\r\n                    p.vx = (p.vx / speed) * maxSpeed;\r\n                    p.vy = (p.vy / speed) * maxSpeed;\r\n                }\r\n\r\n                p.x += p.vx * deltaTime;\r\n                p.y += p.vy * deltaTime;\r\n\r\n                \r\n\r\n                if (p.alpha <= 0) {\r\n                    particles.splice(i, 1)\r\n                    continue\r\n                }\r\n                \r\n\r\n                ctx.globalAlpha = p.alpha;\r\n                ctx.shadowBlur = 1;\r\n                ctx.shadowColor = \"white\";\r\n                ctx.fillStyle = 'white';\r\n\r\n                ctx.beginPath();\r\n                ctx.arc(p.x, p.y, p.radius, 0, Math.PI * 2);\r\n                ctx.fill();\r\n            }\r\n            ctx.globalAlpha = 1\r\n            animationRef.current = requestAnimationFrame(animate)\r\n        }\r\n\r\n        animationRef.current = requestAnimationFrame(animate)\r\n        window.addEventListener('resize', updateSize)\r\n\r\n        return () => {\r\n            if (animationRef.current){\r\n                cancelAnimationFrame(animationRef.current)\r\n            }\r\n            window.removeEventListener('resize', updateSize)\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <div className=\"relative flex justify-center items-center h-full w-full\">\r\n            <canvas\r\n                ref={canvasRef}\r\n                className=\"absolute w-full h-full pointer-events-none z-1\"\r\n            >\r\n            </canvas>\r\n            <button\r\n                ref={buttonRef}\r\n                onClick={() => openModal()}\r\n                onMouseEnter={() => (isHovering.current = true)}\r\n                onMouseLeave={() => (isHovering.current = false)}\r\n                className=\"relative flex items-center justify-center p-2 h-8 w-15 bg-white/10 rounded-full hover:bg-white/40 transition-colors z-2\"\r\n            >\r\n                {children}\r\n            </button>\r\n\r\n        </div>\r\n    )\r\n}\r\n","import { on } from \"events\";\r\nimport { useRef } from \"react\";\r\n\r\ntype SwipeConfig = {\r\n    onSwipeLeft?: () => void,\r\n    onSwipeRight?: () => void,\r\n    threshold?: number\r\n}\r\n\r\nexport function useSwipe({\r\n    onSwipeLeft,\r\n    onSwipeRight,\r\n    threshold = 50\r\n}: SwipeConfig) {\r\n    const startX = useRef<number | null>(null);\r\n\r\n    const onTouchStart = (e: React.TouchEvent) => {\r\n        startX.current = e.touches[0].clientX;\r\n    }\r\n\r\n    const onTouchEnd = (e: React.TouchEvent) => {\r\n        if (startX.current === null) return;\r\n\r\n        const endX = e.changedTouches[0].clientX;\r\n        const delta = endX - startX.current;\r\n\r\n        if(Math.abs(delta) > threshold) {\r\n            if(delta > 0) onSwipeRight?.()\r\n            else onSwipeLeft?.()\r\n        }\r\n\r\n        startX.current = null;\r\n    }\r\n\r\n    return {\r\n        onTouchStart,\r\n        onTouchEnd\r\n    }\r\n}"],"names":["module","exports","require","vendored","React","AppRouterContext","HooksClientContext","ServerInsertedHtml","process","env","NEXT_RUNTIME","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","ReactJsxRuntime"],"mappings":"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","ignoreList":[0,1,2,3,4,5]}