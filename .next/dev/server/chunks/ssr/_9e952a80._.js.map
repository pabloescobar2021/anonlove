{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/hooks/useCart.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, use } from \"react\"\r\n\r\nexport type CartItem = {\r\n    id: string | number;\r\n    name: string;\r\n    quantity: number;\r\n    image? : string | null;\r\n}\r\n\r\nexport function useCart() {\r\n    const [cart, setCart] = useState<CartItem[]>([]);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n    // Загрузка корзины из localStorage при монтировании\r\n    useEffect(() => {\r\n        const savedCart = localStorage.getItem(\"cart\");\r\n        if (savedCart) {\r\n            try{\r\n                setCart(JSON.parse(savedCart));\r\n            } catch (e) {\r\n                console.error(\"Ошибка при парсинге сохранённой корзины:\", e);\r\n            }\r\n        }\r\n        setIsLoaded(true);\r\n    }, []);\r\n\r\n    // Сохранение в localStorage при изменении\r\n    useEffect(() => {\r\n        if (isLoaded){\r\n            localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n        }\r\n    },[cart,isLoaded]);\r\n\r\n    const addToCart = (product: Omit<CartItem, 'quantity'>) => {\r\n        setCart(prevCart => {\r\n            const existingItem = prevCart.find(item => item.id === product.id);\r\n\r\n            if (existingItem) {\r\n                return prevCart.map(item => \r\n                    item.id === product.id\r\n                    ? { ...item, quantity: item.quantity + 1 }\r\n                    : item\r\n                )\r\n            } else{\r\n                return [...prevCart, {...product, quantity: 1}];\r\n            }\r\n        });\r\n    };\r\n\r\n    const updateQuantity = (productId: string | number, quantity: number) => {\r\n        setCart(prevCart => {\r\n            if(quantity <= 0){\r\n                removeFromCart(productId);\r\n                return prevCart;\r\n            }\r\n            return prevCart.map(item => item.id === productId ? { ...item, quantity } : item);\r\n        })\r\n    }\r\n\r\n    const clearCart = () => {\r\n        setCart([]);\r\n    }\r\n\r\n    const removeFromCart = (productId: string | number) => {\r\n        setCart(prevCart => prevCart.filter(item => item.id !== productId));\r\n    }\r\n\r\n    const getItemCount = () => {\r\n        return cart.reduce((total, item) => total + item.quantity, 0);\r\n    }\r\n\r\n\r\n    return {\r\n        cart,\r\n        addToCart,\r\n        updateQuantity,\r\n        clearCart,\r\n        removeFromCart,\r\n        getItemCount\r\n\r\n    }\r\n}"],"names":[],"mappings":";;;;AAEA;AAFA;;AAWO,SAAS;IACZ,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAa,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,oDAAoD;IACpD,IAAA,kNAAS,EAAC;QACN,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,WAAW;YACX,IAAG;gBACC,QAAQ,KAAK,KAAK,CAAC;YACvB,EAAE,OAAO,GAAG;gBACR,QAAQ,KAAK,CAAC,4CAA4C;YAC9D;QACJ;QACA,YAAY;IAChB,GAAG,EAAE;IAEL,0CAA0C;IAC1C,IAAA,kNAAS,EAAC;QACN,IAAI,UAAS;YACT,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAChD;IACJ,GAAE;QAAC;QAAK;KAAS;IAEjB,MAAM,YAAY,CAAC;QACf,QAAQ,CAAA;YACJ,MAAM,eAAe,SAAS,IAAI,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,QAAQ,EAAE;YAEjE,IAAI,cAAc;gBACd,OAAO,SAAS,GAAG,CAAC,CAAA,OAChB,KAAK,EAAE,KAAK,QAAQ,EAAE,GACpB;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG;oBAAE,IACvC;YAEV,OAAM;gBACF,OAAO;uBAAI;oBAAU;wBAAC,GAAG,OAAO;wBAAE,UAAU;oBAAC;iBAAE;YACnD;QACJ;IACJ;IAEA,MAAM,iBAAiB,CAAC,WAA4B;QAChD,QAAQ,CAAA;YACJ,IAAG,YAAY,GAAE;gBACb,eAAe;gBACf,OAAO;YACX;YACA,OAAO,SAAS,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,YAAY;oBAAE,GAAG,IAAI;oBAAE;gBAAS,IAAI;QAChF;IACJ;IAEA,MAAM,YAAY;QACd,QAAQ,EAAE;IACd;IAEA,MAAM,iBAAiB,CAAC;QACpB,QAAQ,CAAA,WAAY,SAAS,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;IAC5D;IAEA,MAAM,eAAe;QACjB,OAAO,KAAK,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ,EAAE;IAC/D;IAGA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;IAEJ;AACJ"}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/cart/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useCart } from \"@/hooks/useCart\"\r\nimport Link from \"next/link\"\r\n\r\nexport default function CartPage() {\r\n    const { cart, updateQuantity, removeFromCart, clearCart } = useCart();\r\n\r\n    if (cart.length === 0) {\r\n        return (\r\n        <div className=\"p-6 text-center\">\r\n            <h1 className=\"text-3xl font-bold mb-4\">Корзина пуста</h1>\r\n            <p className=\"text-gray-600 mb-6\">Добавьте товары из каталога</p>\r\n            <Link \r\n            href=\"/\"\r\n            className=\"bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition inline-block\"\r\n            >\r\n            ← Вернуться в каталог\r\n            </Link>\r\n        </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-6 max-w-4xl mx-auto\">\r\n            <div className=\"flex justify-between items-center mb-6\">\r\n                {/* <h1 className=\"text-3xl font-bold\">Корзина ({getItemCount()} шт.)</h1> */}\r\n                <Link \r\n                href=\"/\"\r\n                className=\"text-blue-600 hover:underline\"\r\n                >\r\n                ← Продолжить покупки\r\n                </Link>\r\n            </div>\r\n\r\n            <div className=\"space-y-4 mb-6\">\r\n                {cart.map((item) => (\r\n                <div key={item.id} className=\"flex gap-4 p-4 border rounded-lg\">\r\n                    {item.image ? (\r\n                    <img \r\n                        src={item.image} \r\n                        alt={item.name}\r\n                        className=\"w-24 h-24 object-cover rounded\"\r\n                    />\r\n                    ) : (\r\n                    <div className=\"w-24 h-24 bg-gray-200 rounded flex items-center justify-center\">\r\n                        <span className=\"text-gray-400 text-xs\">No image</span>\r\n                    </div>\r\n                    )}\r\n\r\n                    <div className=\"flex-1\">\r\n                    <h3 className=\"font-semibold text-lg\">{item.name}</h3>\r\n                    {/* {item.category && (\r\n                        <p className=\"text-sm text-gray-600\">{item.category}</p>\r\n                    )} */}\r\n                    <p className=\"text-blue-600 font-bold mt-1\">\r\n                        {/* {item.price.toLocaleString('ru-RU')} ₽ */}\r\n                    </p>\r\n                    </div>\r\n\r\n                    <div className=\"flex flex-col items-end justify-between\">\r\n                    <button\r\n                        // onClick={() => removeFromCart(item.id)}\r\n                        className=\"text-red-500 hover:text-red-700 text-sm\"\r\n                    >\r\n                        ✕ Удалить\r\n                    </button>\r\n\r\n                    <div className=\"flex items-center gap-2\">\r\n                        <button\r\n                        onClick={() => updateQuantity(item.id, item.quantity - 1)}\r\n                        className=\"w-8 h-8 bg-gray-200 rounded hover:bg-gray-300\"\r\n                        >\r\n                        −\r\n                        </button>\r\n                        <span className=\"w-12 text-center font-semibold\">\r\n                        {item.quantity}\r\n                        </span>\r\n                        <button\r\n                        onClick={() => updateQuantity(item.id, item.quantity + 1)}\r\n                        className=\"w-8 h-8 bg-gray-200 rounded hover:bg-gray-300\"\r\n                        >\r\n                        +\r\n                        </button>\r\n                    </div>\r\n\r\n                    <p className=\"font-bold text-lg\">\r\n                        {/* {(item.price * item.quantity).toLocaleString('ru-RU')} ₽ */}\r\n                    </p>\r\n                    </div>\r\n                </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"border-t pt-6\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                <span className=\"text-2xl font-bold\">Итого:</span>\r\n                <span className=\"text-3xl font-bold text-blue-600\">\r\n                    {/* {getTotal().toLocaleString('ru-RU')} ₽ */}\r\n                </span>\r\n                </div>\r\n\r\n                <div className=\"flex gap-4\">\r\n                <button\r\n                    // onClick={clearCart}\r\n                    className=\"flex-1 bg-gray-200 text-gray-700 py-3 rounded-lg hover:bg-gray-300 transition\"\r\n                >\r\n                    Очистить корзину\r\n                </button>\r\n                <button\r\n                    className=\"flex-1 bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 transition\"\r\n                >\r\n                    Оформить заказ\r\n                </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n  );\r\n\r\n  \r\n\r\n}"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAKe,SAAS;IACpB,MAAM,EAAE,IAAI,EAAE,cAAc,EAAE,cAAc,EAAE,SAAS,EAAE,GAAG,IAAA,2HAAO;IAEnE,IAAI,KAAK,MAAM,KAAK,GAAG;QACnB,qBACA,8OAAC;YAAI,WAAU;;8BACX,8OAAC;oBAAG,WAAU;8BAA0B;;;;;;8BACxC,8OAAC;oBAAE,WAAU;8BAAqB;;;;;;8BAClC,8OAAC,uKAAI;oBACL,MAAK;oBACL,WAAU;8BACT;;;;;;;;;;;;IAKT;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;gBAAI,WAAU;0BAEX,cAAA,8OAAC,uKAAI;oBACL,MAAK;oBACL,WAAU;8BACT;;;;;;;;;;;0BAKL,8OAAC;gBAAI,WAAU;0BACV,KAAK,GAAG,CAAC,CAAC,qBACX,8OAAC;wBAAkB,WAAU;;4BACxB,KAAK,KAAK,iBACX,8OAAC;gCACG,KAAK,KAAK,KAAK;gCACf,KAAK,KAAK,IAAI;gCACd,WAAU;;;;;qDAGd,8OAAC;gCAAI,WAAU;0CACX,cAAA,8OAAC;oCAAK,WAAU;8CAAwB;;;;;;;;;;;0CAI5C,8OAAC;gCAAI,WAAU;;kDACf,8OAAC;wCAAG,WAAU;kDAAyB,KAAK,IAAI;;;;;;kDAIhD,8OAAC;wCAAE,WAAU;;;;;;;;;;;;0CAKb,8OAAC;gCAAI,WAAU;;kDACf,8OAAC;wCACG,0CAA0C;wCAC1C,WAAU;kDACb;;;;;;kDAID,8OAAC;wCAAI,WAAU;;0DACX,8OAAC;gDACD,SAAS,IAAM,eAAe,KAAK,EAAE,EAAE,KAAK,QAAQ,GAAG;gDACvD,WAAU;0DACT;;;;;;0DAGD,8OAAC;gDAAK,WAAU;0DACf,KAAK,QAAQ;;;;;;0DAEd,8OAAC;gDACD,SAAS,IAAM,eAAe,KAAK,EAAE,EAAE,KAAK,QAAQ,GAAG;gDACvD,WAAU;0DACT;;;;;;;;;;;;kDAKL,8OAAC;wCAAE,WAAU;;;;;;;;;;;;;uBAjDP,KAAK,EAAE;;;;;;;;;;0BAyDrB,8OAAC;gBAAI,WAAU;;kCACX,8OAAC;wBAAI,WAAU;;0CACf,8OAAC;gCAAK,WAAU;0CAAqB;;;;;;0CACrC,8OAAC;gCAAK,WAAU;;;;;;;;;;;;kCAKhB,8OAAC;wBAAI,WAAU;;0CACf,8OAAC;gCACG,sBAAsB;gCACtB,WAAU;0CACb;;;;;;0CAGD,8OAAC;gCACG,WAAU;0CACb;;;;;;;;;;;;;;;;;;;;;;;;AAUjB"}}]
}