{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/providers.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { SessionProvider } from \"next-auth/react\";\r\n\r\nexport function Providers({ children }: {children: React.ReactNode}) {\r\n    return <SessionProvider>{children}</SessionProvider>\r\n}"],"names":[],"mappings":";;;;;AAEA;AAFA;;;AAIO,SAAS,UAAU,EAAE,QAAQ,EAA+B;IAC/D,qBAAO,8OAAC,iKAAe;kBAAE;;;;;;AAC7B"}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/hooks/useCart.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, use } from \"react\"\r\n\r\nexport type CartItem = {\r\n    id: string | number;\r\n    name: string;\r\n    quantity: number;\r\n    image? : string | null;\r\n}\r\n\r\nexport function useCart() {\r\n    const [cart, setCart] = useState<CartItem[]>([]);\r\n    const [isLoaded, setIsLoaded] = useState(false);\r\n\r\n    // Загрузка корзины из localStorage при монтировании\r\n    useEffect(() => {\r\n        const savedCart = localStorage.getItem(\"cart\");\r\n        if (savedCart) {\r\n            try{\r\n                setCart(JSON.parse(savedCart));\r\n            } catch (e) {\r\n                console.error(\"Ошибка при парсинге сохранённой корзины:\", e);\r\n            }\r\n        }\r\n        setIsLoaded(true);\r\n    }, []);\r\n\r\n    // Сохранение в localStorage при изменении\r\n    useEffect(() => {\r\n        if (isLoaded){\r\n            localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n        }\r\n    },[cart,isLoaded]);\r\n\r\n    const addToCart = (product: Omit<CartItem, 'quantity'>) => {\r\n        setCart(prevCart => {\r\n            const existingItem = prevCart.find(item => item.id === product.id);\r\n\r\n            if (existingItem) {\r\n                return prevCart.map(item => \r\n                    item.id === product.id\r\n                    ? { ...item, quantity: item.quantity + 1 }\r\n                    : item\r\n                )\r\n            } else{\r\n                return [...prevCart, {...product, quantity: 1}];\r\n            }\r\n        });\r\n    };\r\n\r\n    const updateQuantity = (productId: string | number, quantity: number) => {\r\n        setCart(prevCart => {\r\n            if(quantity <= 0){\r\n                removeFromCart(productId);\r\n                return prevCart;\r\n            }\r\n            return prevCart.map(item => item.id === productId ? { ...item, quantity } : item);\r\n        })\r\n    }\r\n\r\n    const clearCart = () => {\r\n        setCart([]);\r\n    }\r\n\r\n    const removeFromCart = (productId: string | number) => {\r\n        setCart(prevCart => prevCart.filter(item => item.id !== productId));\r\n    }\r\n\r\n    const getItemCount = () => {\r\n        return cart.reduce((total, item) => total + item.quantity, 0);\r\n    }\r\n\r\n\r\n    return {\r\n        cart,\r\n        addToCart,\r\n        updateQuantity,\r\n        clearCart,\r\n        removeFromCart,\r\n        getItemCount\r\n\r\n    }\r\n}"],"names":[],"mappings":";;;;AAEA;AAFA;;AAWO,SAAS;IACZ,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAa,EAAE;IAC/C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IAEzC,oDAAoD;IACpD,IAAA,kNAAS,EAAC;QACN,MAAM,YAAY,aAAa,OAAO,CAAC;QACvC,IAAI,WAAW;YACX,IAAG;gBACC,QAAQ,KAAK,KAAK,CAAC;YACvB,EAAE,OAAO,GAAG;gBACR,QAAQ,KAAK,CAAC,4CAA4C;YAC9D;QACJ;QACA,YAAY;IAChB,GAAG,EAAE;IAEL,0CAA0C;IAC1C,IAAA,kNAAS,EAAC;QACN,IAAI,UAAS;YACT,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAChD;IACJ,GAAE;QAAC;QAAK;KAAS;IAEjB,MAAM,YAAY,CAAC;QACf,QAAQ,CAAA;YACJ,MAAM,eAAe,SAAS,IAAI,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,QAAQ,EAAE;YAEjE,IAAI,cAAc;gBACd,OAAO,SAAS,GAAG,CAAC,CAAA,OAChB,KAAK,EAAE,KAAK,QAAQ,EAAE,GACpB;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG;oBAAE,IACvC;YAEV,OAAM;gBACF,OAAO;uBAAI;oBAAU;wBAAC,GAAG,OAAO;wBAAE,UAAU;oBAAC;iBAAE;YACnD;QACJ;IACJ;IAEA,MAAM,iBAAiB,CAAC,WAA4B;QAChD,QAAQ,CAAA;YACJ,IAAG,YAAY,GAAE;gBACb,eAAe;gBACf,OAAO;YACX;YACA,OAAO,SAAS,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,YAAY;oBAAE,GAAG,IAAI;oBAAE;gBAAS,IAAI;QAChF;IACJ;IAEA,MAAM,YAAY;QACd,QAAQ,EAAE;IACd;IAEA,MAAM,iBAAiB,CAAC;QACpB,QAAQ,CAAA,WAAY,SAAS,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;IAC5D;IAEA,MAAM,eAAe;QACjB,OAAO,KAAK,MAAM,CAAC,CAAC,OAAO,OAAS,QAAQ,KAAK,QAAQ,EAAE;IAC/D;IAGA,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;IAEJ;AACJ"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/components/Header.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { signIn, signOut, useSession } from \"next-auth/react\";\r\nimport { useCart } from \"@/hooks/useCart\";\r\n\r\nexport default function Header(){\r\n    const [open, setOpen] = useState(false);\r\n    const { data: session } = useSession();\r\n    const menuRef = useRef<HTMLDivElement | null>(null);\r\n\r\n    const [openSearch, setOpenSearch] = useState(false);\r\n    const [query, setQuery] = useState(\"\");\r\n    const [results, setResults] = useState<Array<{id: string | number; name: string}>>([]); // Результаты поиска\r\n    const [loading, setLoading] = useState(false);\r\n    const cacheRef = useRef<Record<string, Array<{id: string | number; name: string}>>>({}); // Кэш для результатов поиска\r\n\r\n    const { cart, getItemCount } = useCart();\r\n\r\n    useEffect(() => {\r\n        function handleOutside(e: MouseEvent) {\r\n            if (!menuRef.current) return;\r\n            if (e.target instanceof Node && !menuRef.current.contains(e.target)) {\r\n                setOpen(false);\r\n            }\r\n        }\r\n\r\n        function handleKey(e: KeyboardEvent) {\r\n            if (e.key === \"Escape\") setOpen(false);\r\n        }\r\n\r\n        document.addEventListener(\"mousedown\", handleOutside);\r\n        document.addEventListener(\"keydown\", handleKey);\r\n        return () => {\r\n            document.removeEventListener(\"mousedown\", handleOutside);\r\n            document.removeEventListener(\"keydown\", handleKey);\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (query.length < 2){\r\n            setResults([]);\r\n            return;\r\n        }\r\n        if (cacheRef.current[query]){\r\n            setResults(cacheRef.current[query]);\r\n            return;\r\n        }\r\n\r\n        const timer = setTimeout(async () => {\r\n            setLoading(true);\r\n            try{\r\n                const res = await fetch(`/api/searchRoute?q=${query}`);\r\n                const data = await res.json();\r\n                cacheRef.current[query] = data;\r\n                setResults(data);\r\n            } finally{\r\n                setLoading(false);\r\n            }\r\n        }, 300);\r\n        return () => clearTimeout(timer);\r\n    }, [query]);\r\n\r\n    return (\r\n        <header className=\"bg-gray-800 text-white\">\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"flex items-center justify-between h-16\">\r\n                    <Link href=\"/\" className=\"flex items-center gap-3\">\r\n                        <span className=\"sr-only\">Главная</span>\r\n                        <svg className=\"w-8 h-8 text-indigo-400\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden>\r\n                            <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"4\" fill=\"currentColor\" />\r\n                        </svg>\r\n                        <strong className=\"text-white\">Логотип</strong>\r\n                    </Link>\r\n\r\n                    <nav className=\"hidden md:flex gap-6 text-sm justify-center items-center\">\r\n                        <Link href=\"/\" className=\"text-gray-200 hover:underline\">Главная</Link>\r\n                        <Link href=\"/about\" className=\"text-gray-200 hover:underline\">О нас</Link>\r\n                        <Link href=\"/catalog\" className=\"text-gray-200 hover:underline\">Услуги</Link>\r\n\r\n                    {/* Поиск */}\r\n                        <div className=\"relative\">\r\n                            <button className=\"flex items-center text-gray-200 \"\r\n                                onClick={() => setOpenSearch((v) => !v)}\r\n                            >\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"size-4\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\" />\r\n                                </svg>\r\n                            </button>\r\n\r\n                            <div className={`absolute top-1/2 -translate-y-1/2 p-2 left-full w-64 rounded shadow-lg transition-all duration-100 ${\r\n                                openSearch ? \"opacity-100 translate-x-0\" : \"opacity-0 -translate-x-4 pointer-events-none\"}\r\n                            }`}>\r\n                                <input\r\n                                    value={query}\r\n                                    onChange={(e) => setQuery(e.target.value)}\r\n                                    type=\"text\"\r\n                                    placeholder=\"Поиск...\"\r\n                                    className=\"w-full border p-2 rounded \"\r\n                                    autoFocus\r\n                                />\r\n                            </div>\r\n\r\n                            {results.length > 0 && (\r\n                            <ul className=\"absolute left-full w-64 mt-2 bg-white text-black rounded shadow divide-y\">\r\n                                {results.map((p) => (\r\n                                <li key={p.id}>\r\n                                    <Link\r\n                                    href={`/product/${p.id}`}\r\n                                    className=\"flex items-center gap-3 p-2 hover:bg-gray-100\"\r\n                                    >\r\n                                    <div>\r\n                                        <div className=\"text-sm font-medium\">{p.name}</div>\r\n                                    </div>\r\n                                    </Link>\r\n                                </li>\r\n                                ))}\r\n                            </ul>\r\n                            )}\r\n\r\n                        </div>\r\n                    </nav>\r\n\r\n\r\n                    <div className=\"relative\" ref={menuRef}>\r\n                        {!session ? (\r\n                            <>\r\n                                <button\r\n                                    aria-expanded={open}\r\n                                    aria-haspopup=\"menu\"\r\n                                    onClick={() => setOpen((v) => !v)}\r\n                                    className=\"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-sm\"\r\n                                >\r\n                                    Вход\r\n                                </button>\r\n\r\n                                {open && (\r\n                                    <div className=\"absolute right-0 mt-2 z-50 bg-white text-black dark:bg-gray-900 dark:text-white p-4 rounded shadow-lg w-44\">\r\n                                        <div className=\"text-sm mb-2\">Войти с помощью</div>\r\n                                        <button className=\"w-full text-left py-1 hover:bg-gray-100 rounded\" onClick={() => signIn(\"github\")}>\r\n                                            GitHub\r\n                                        </button>\r\n                                        <button className=\"w-full text-left py-1 hover:bg-gray-100 rounded\" onClick={() => signIn(\"google\")}>\r\n                                            Google\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </>\r\n                        ) : (\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <span className=\"text-sm\">{session.user?.name ?? session.user?.email}</span>\r\n                                <button className=\"px-3 py-1 rounded border text-sm\" onClick={() => signOut()}>\r\n                                    Выход\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                        \r\n                        {/* Корзина */}\r\n                        <div>\r\n                            <Link href=\"/cart\" className=\"flex items-center text-gray-200 hover:underline text-[12px] \">\r\n                                <div className=\"mx-auto\">Корзина {getItemCount()}</div>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}