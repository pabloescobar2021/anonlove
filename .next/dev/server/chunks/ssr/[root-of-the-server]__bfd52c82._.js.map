{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/utils/supabase/alSupabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,uLAAY"}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/app/anonlove/things/utils/messages.ts"],"sourcesContent":["import { supabase } from \"@/utils/supabase/alSupabase\";\r\nimport { error } from \"console\";\r\nimport { ItemDto } from \"../types/type\";\r\n\r\nexport async function getInboxMessages(userId: string){\r\n    const {data, error} = await supabase\r\n        .from(\"messages_safe\")\r\n        .select(`\r\n            *\r\n            `)\r\n        .eq(\"to_user\", userId)\r\n        .order(\"created_at\", {ascending: true})\r\n    if(error) throw error;  \r\n\r\n    const messages = (data || []).map(msg => {\r\n        const anonSetting = msg.user_anonymous_settings?.[0]?.is_anon\r\n        return {\r\n            ...msg,\r\n            displayId: (anonSetting || msg.is_anon) ? \"Anon\" : msg.from_public_id,\r\n            username: (anonSetting || msg.is_anon) ? \"Anon\" : msg.from_username\r\n        }\r\n    })\r\n\r\n    return messages \r\n}\r\n\r\nexport async function getCurrentMessage(messageId: string, userId: string) {\r\n    const {data, error} = await supabase\r\n    .from(\"messages_safe\")\r\n    .select(\"*\")\r\n    .eq(\"id\", messageId)\r\n    .eq(\"to_user\", userId)\r\n    .single()\r\n    if (error) throw error\r\n    return data || []\r\n}\r\n\r\nexport async function getSentMessages(userId: string) {\r\n    const {data, error} = await supabase\r\n        .from('messages_safe')\r\n        .select(`\r\n            *`)\r\n        .eq(\"from_user\", userId)\r\n        .order(\"created_at\", {ascending: true})\r\n    \r\n    if(error) throw error\r\n    return data || []\r\n\r\n}\r\n\r\nexport async function sendMessage({\r\n    fromUserId,\r\n    toUserId,\r\n    toPublicId,\r\n    body,\r\n    isAnon\r\n}: {\r\n    fromUserId: string,\r\n    toUserId?: string,\r\n    toPublicId?: string,\r\n    body: ItemDto[],\r\n    isAnon?: boolean\r\n}) {\r\n    let receiverId = toUserId\r\n\r\n    if (!receiverId){\r\n        if (!toPublicId) throw new Error(\"Не указан пользователь, малыш\")\r\n            const {data: receiver, error: userError} = await supabase\r\n                .from(\"users\") \r\n                .select(\"id_user\")\r\n                .eq(\"public_id\", toPublicId)\r\n                .single()\r\n            if(userError || !receiver){\r\n                throw new Error(\"Пользователь не найден, кись\")\r\n            }\r\n        receiverId = receiver.id_user\r\n    }\r\n\r\n    const {error: settingError} = await supabase\r\n        .from(\"user_anonymous_settings\")\r\n        .upsert(\r\n            [{\r\n                from_user_id: fromUserId,\r\n                to_user_id: receiverId,\r\n                is_anon: isAnon\r\n            }], \r\n            { \r\n                onConflict: 'from_user_id,to_user_id'\r\n            }\r\n        );\r\n    if(settingError) throw settingError\r\n\r\n    const {error: messageError} = await supabase\r\n        .from(\"messages\")\r\n        .insert({\r\n            from_user: fromUserId,\r\n            to_user: receiverId,\r\n            body,\r\n        })\r\n    if(messageError) throw messageError\r\n}"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAIO,eAAe,iBAAiB,MAAc;IACjD,MAAM,EAAC,IAAI,EAAE,KAAK,EAAC,GAAG,MAAM,2IAAQ,CAC/B,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC;;YAEL,CAAC,EACJ,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,cAAc;QAAC,WAAW;IAAI;IACzC,IAAG,OAAO,MAAM;IAEhB,MAAM,WAAW,CAAC,QAAQ,EAAE,EAAE,GAAG,CAAC,CAAA;QAC9B,MAAM,cAAc,IAAI,uBAAuB,EAAE,CAAC,EAAE,EAAE;QACtD,OAAO;YACH,GAAG,GAAG;YACN,WAAW,AAAC,eAAe,IAAI,OAAO,GAAI,SAAS,IAAI,cAAc;YACrE,UAAU,AAAC,eAAe,IAAI,OAAO,GAAI,SAAS,IAAI,aAAa;QACvE;IACJ;IAEA,OAAO;AACX;AAEO,eAAe,kBAAkB,SAAiB,EAAE,MAAc;IACrE,MAAM,EAAC,IAAI,EAAE,KAAK,EAAC,GAAG,MAAM,2IAAQ,CACnC,IAAI,CAAC,iBACL,MAAM,CAAC,KACP,EAAE,CAAC,MAAM,WACT,EAAE,CAAC,WAAW,QACd,MAAM;IACP,IAAI,OAAO,MAAM;IACjB,OAAO,QAAQ,EAAE;AACrB;AAEO,eAAe,gBAAgB,MAAc;IAChD,MAAM,EAAC,IAAI,EAAE,KAAK,EAAC,GAAG,MAAM,2IAAQ,CAC/B,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC;aACJ,CAAC,EACL,EAAE,CAAC,aAAa,QAChB,KAAK,CAAC,cAAc;QAAC,WAAW;IAAI;IAEzC,IAAG,OAAO,MAAM;IAChB,OAAO,QAAQ,EAAE;AAErB;AAEO,eAAe,YAAY,EAC9B,UAAU,EACV,QAAQ,EACR,UAAU,EACV,IAAI,EACJ,MAAM,EAOT;IACG,IAAI,aAAa;IAEjB,IAAI,CAAC,YAAW;QACZ,IAAI,CAAC,YAAY,MAAM,IAAI,MAAM;QAC7B,MAAM,EAAC,MAAM,QAAQ,EAAE,OAAO,SAAS,EAAC,GAAG,MAAM,2IAAQ,CACpD,IAAI,CAAC,SACL,MAAM,CAAC,WACP,EAAE,CAAC,aAAa,YAChB,MAAM;QACX,IAAG,aAAa,CAAC,UAAS;YACtB,MAAM,IAAI,MAAM;QACpB;QACJ,aAAa,SAAS,OAAO;IACjC;IAEA,MAAM,EAAC,OAAO,YAAY,EAAC,GAAG,MAAM,2IAAQ,CACvC,IAAI,CAAC,2BACL,MAAM,CACH;QAAC;YACG,cAAc;YACd,YAAY;YACZ,SAAS;QACb;KAAE,EACF;QACI,YAAY;IAChB;IAER,IAAG,cAAc,MAAM;IAEvB,MAAM,EAAC,OAAO,YAAY,EAAC,GAAG,MAAM,2IAAQ,CACvC,IAAI,CAAC,YACL,MAAM,CAAC;QACJ,WAAW;QACX,SAAS;QACT;IACJ;IACJ,IAAG,cAAc,MAAM;AAC3B"}},
    {"offset": {"line": 112, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/app/anonlove/things/hooks/useMessages.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect, useMemo } from \"react\"\r\nimport { getInboxMessages, getSentMessages, sendMessage, getCurrentMessage } from \"../utils/messages\"\r\nimport { ItemDto, Message } from \"../types/type\"\r\n\r\n\r\n\r\nexport function useMessages(userId: string | null) {\r\n    const [inbox, setInbox] = useState<any[]>([])\r\n    const [sent, setSent] = useState<any[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n\r\n    const loadMessage = async () => {\r\n        if(!userId) return\r\n\r\n        try{\r\n            setLoading(true)\r\n            const [inboxData, sentData] = await Promise.all([\r\n                getInboxMessages(userId), \r\n                getSentMessages(userId)\r\n            ])\r\n\r\n            setInbox(inboxData)\r\n            setSent(sentData)\r\n        } catch (error) {\r\n            console.error(\"Error loading messages:\", error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadMessage()\r\n    },[userId])\r\n\r\n    const send = async (\r\n        to: {publicId?: string, userId?: string}, \r\n        body: ItemDto[],\r\n        isAnon?: boolean \r\n    ) => {\r\n        if(!userId) throw new Error(\"User not logged in\")\r\n        \r\n        await sendMessage({\r\n            fromUserId: userId,\r\n            toUserId: to.userId,\r\n            toPublicId: to.publicId, \r\n            body, \r\n            isAnon\r\n        })\r\n\r\n        await loadMessage()\r\n    }\r\n\r\n    return {\r\n        inbox,\r\n        sent,\r\n        loading,\r\n        sendMessage: send,\r\n        refresh: loadMessage\r\n    }\r\n\r\n}\r\n\r\ntype UseCurrentMessageResult = {\r\n    message: Message | null,\r\n    loading: boolean\r\n}\r\nexport function useCurrentMessage(\r\n    userId: string | null, \r\n    messageId: string | null\r\n): UseCurrentMessageResult {\r\n    const [message, setMessage] = useState<Message | null>(null)\r\n    const [loading, setLoading] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (!userId || !messageId) return\r\n\r\n        const loadMessage = async () => {\r\n            setLoading(true)\r\n            try{\r\n                const data = await getCurrentMessage(messageId, userId)\r\n                setMessage(data)\r\n            } catch (error) {\r\n                console.error(\"Error loading messages:\", error)\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        loadMessage()\r\n\r\n    }, [userId, messageId])\r\n\r\n    return {\r\n        message,\r\n        loading\r\n    }\r\n}\r\n\r\n\r\n\r\ntype Dialog = {\r\n    userId: string,\r\n    displayId: string,\r\n\r\n    lastMessage: Message,\r\n    messages: Message[],\r\n    count: number\r\n}\r\n\r\nexport function useDialogs(\r\n    inboxMessages: Message[],\r\n    sentMessages: Message[],\r\n    myUserId: string\r\n) {\r\n    const dialogs = useMemo<Dialog[]>(() => {\r\n        const map = new Map<string, Dialog>()\r\n\r\n        const allMessages = [...inboxMessages, ...sentMessages]\r\n\r\n        for (const msg of allMessages){\r\n            const dialogUserId = msg.from_user === myUserId\r\n                ? msg.to_user\r\n                : msg.from_user\r\n\r\n            let displayId = ''\r\n            if(msg.from_display_id === 'A'){\r\n                displayId = 'Anon'\r\n            } else{ \r\n                displayId = msg.from_display_id\r\n            }\r\n\r\n            if(!map.has(dialogUserId)) {\r\n                map.set(dialogUserId, {\r\n                    userId: dialogUserId,\r\n                    displayId: displayId,\r\n\r\n                    lastMessage: msg,\r\n                    messages: [msg],\r\n                    count: 1\r\n                })\r\n            } else{\r\n                const dialog = map.get(dialogUserId)!\r\n                dialog.messages.push(msg)\r\n                dialog.count++\r\n\r\n                if(\r\n                    new Date(msg.created_at) >\r\n                    new Date(dialog.lastMessage.created_at)\r\n                ){\r\n                    dialog.lastMessage = msg\r\n                }\r\n            }\r\n        }\r\n\r\n        return Array.from(map.values()).sort(\r\n            (a,b) =>\r\n                new Date(b.lastMessage.created_at).getTime() -\r\n                new Date(a.lastMessage.created_at).getTime()\r\n        )\r\n    }, [inboxMessages, sentMessages, myUserId])\r\n\r\n    return dialogs\r\n}"],"names":[],"mappings":";;;;;;;;AAEA;AACA;AAHA;;;AAQO,SAAS,YAAY,MAAqB;IAC7C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAC5C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAC1C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAGvC,MAAM,cAAc;QAChB,IAAG,CAAC,QAAQ;QAEZ,IAAG;YACC,WAAW;YACX,MAAM,CAAC,WAAW,SAAS,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAC5C,IAAA,kKAAgB,EAAC;gBACjB,IAAA,iKAAe,EAAC;aACnB;YAED,SAAS;YACT,QAAQ;QACZ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,2BAA2B;QAC7C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAA,kNAAS,EAAC;QACN;IACJ,GAAE;QAAC;KAAO;IAEV,MAAM,OAAO,OACT,IACA,MACA;QAEA,IAAG,CAAC,QAAQ,MAAM,IAAI,MAAM;QAE5B,MAAM,IAAA,6JAAW,EAAC;YACd,YAAY;YACZ,UAAU,GAAG,MAAM;YACnB,YAAY,GAAG,QAAQ;YACvB;YACA;QACJ;QAEA,MAAM;IACV;IAEA,OAAO;QACH;QACA;QACA;QACA,aAAa;QACb,SAAS;IACb;AAEJ;AAMO,SAAS,kBACZ,MAAqB,EACrB,SAAwB;IAExB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAiB;IACvD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACN,IAAI,CAAC,UAAU,CAAC,WAAW;QAE3B,MAAM,cAAc;YAChB,WAAW;YACX,IAAG;gBACC,MAAM,OAAO,MAAM,IAAA,mKAAiB,EAAC,WAAW;gBAChD,WAAW;YACf,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,2BAA2B;YAC7C,SAAU;gBACN,WAAW;YACf;QACJ;QACA;IAEJ,GAAG;QAAC;QAAQ;KAAU;IAEtB,OAAO;QACH;QACA;IACJ;AACJ;AAaO,SAAS,WACZ,aAAwB,EACxB,YAAuB,EACvB,QAAgB;IAEhB,MAAM,UAAU,IAAA,gNAAO,EAAW;QAC9B,MAAM,MAAM,IAAI;QAEhB,MAAM,cAAc;eAAI;eAAkB;SAAa;QAEvD,KAAK,MAAM,OAAO,YAAY;YAC1B,MAAM,eAAe,IAAI,SAAS,KAAK,WACjC,IAAI,OAAO,GACX,IAAI,SAAS;YAEnB,IAAI,YAAY;YAChB,IAAG,IAAI,eAAe,KAAK,KAAI;gBAC3B,YAAY;YAChB,OAAM;gBACF,YAAY,IAAI,eAAe;YACnC;YAEA,IAAG,CAAC,IAAI,GAAG,CAAC,eAAe;gBACvB,IAAI,GAAG,CAAC,cAAc;oBAClB,QAAQ;oBACR,WAAW;oBAEX,aAAa;oBACb,UAAU;wBAAC;qBAAI;oBACf,OAAO;gBACX;YACJ,OAAM;gBACF,MAAM,SAAS,IAAI,GAAG,CAAC;gBACvB,OAAO,QAAQ,CAAC,IAAI,CAAC;gBACrB,OAAO,KAAK;gBAEZ,IACI,IAAI,KAAK,IAAI,UAAU,IACvB,IAAI,KAAK,OAAO,WAAW,CAAC,UAAU,GACzC;oBACG,OAAO,WAAW,GAAG;gBACzB;YACJ;QACJ;QAEA,OAAO,MAAM,IAAI,CAAC,IAAI,MAAM,IAAI,IAAI,CAChC,CAAC,GAAE,IACC,IAAI,KAAK,EAAE,WAAW,CAAC,UAAU,EAAE,OAAO,KAC1C,IAAI,KAAK,EAAE,WAAW,CAAC,UAAU,EAAE,OAAO;IAEtD,GAAG;QAAC;QAAe;QAAc;KAAS;IAE1C,OAAO;AACX"}},
    {"offset": {"line": 241, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/app/anonlove/createcard/useRandColor.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState,useEffect, useRef } from \"react\"\r\n\r\ntype Color = {r: number, g: number, b: number, a: number}\r\nconst lerp = (a: number, b: number, t: number) => {\r\n    return a + (b - a) * t\r\n}\r\nconst smoothStep = (t: number) => {\r\n    return t * t * (3 - 2 * t)\r\n}\r\nconst mixColor = (from: Color, to: Color, t: number): Color => {\r\n    const k = smoothStep(t)\r\n    return{\r\n        r: lerp(from.r, to.r, k),\r\n        g: lerp(from.g, to.g, k),\r\n        b: lerp(from.b, to.b, k),\r\n        a: lerp(from.a, to.a, k),\r\n    }\r\n}\r\nconst randomColor = (): Color => {\r\n    return {\r\n        r: Math.floor(Math.random() * 256),\r\n        g: 0,\r\n        b: 0,\r\n        a: 0.1\r\n    }\r\n}\r\n\r\nexport function useRandColor() {\r\n    const [bg, setBg] = useState<Color>({r: 0, g: 0, b: 0, a: 0.1})\r\n    const colorRef = useRef<Color>(bg)\r\n    const frameRef = useRef<number | null>(null)\r\n\r\n\r\n    useEffect(() => {\r\n        let start: number | null = null\r\n        let from = colorRef.current\r\n        let to = randomColor()\r\n        const duration = 3000 \r\n\r\n        const animate = (time: number) => {\r\n            if (!start) start = time\r\n            const t = Math.min((time - start) / duration, 1)\r\n            const next = mixColor(from, to, t)\r\n\r\n            colorRef.current = next\r\n            setBg(next)\r\n\r\n            if (t < 1) {\r\n                frameRef.current = requestAnimationFrame(animate)\r\n            } else{\r\n                from = to\r\n                to = randomColor()\r\n                start = null\r\n                frameRef.current = requestAnimationFrame(animate)\r\n            }\r\n        }\r\n        frameRef.current = requestAnimationFrame(animate)\r\n\r\n        return () => {\r\n            if (frameRef.current) cancelAnimationFrame(frameRef.current)\r\n        }\r\n    },[])\r\n\r\n    return {\r\n        bg\r\n    }\r\n}"],"names":[],"mappings":";;;;AAEA;AAFA;;AAKA,MAAM,OAAO,CAAC,GAAW,GAAW;IAChC,OAAO,IAAI,CAAC,IAAI,CAAC,IAAI;AACzB;AACA,MAAM,aAAa,CAAC;IAChB,OAAO,IAAI,IAAI,CAAC,IAAI,IAAI,CAAC;AAC7B;AACA,MAAM,WAAW,CAAC,MAAa,IAAW;IACtC,MAAM,IAAI,WAAW;IACrB,OAAM;QACF,GAAG,KAAK,KAAK,CAAC,EAAE,GAAG,CAAC,EAAE;QACtB,GAAG,KAAK,KAAK,CAAC,EAAE,GAAG,CAAC,EAAE;QACtB,GAAG,KAAK,KAAK,CAAC,EAAE,GAAG,CAAC,EAAE;QACtB,GAAG,KAAK,KAAK,CAAC,EAAE,GAAG,CAAC,EAAE;IAC1B;AACJ;AACA,MAAM,cAAc;IAChB,OAAO;QACH,GAAG,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;QAC9B,GAAG;QACH,GAAG;QACH,GAAG;IACP;AACJ;AAEO,SAAS;IACZ,MAAM,CAAC,IAAI,MAAM,GAAG,IAAA,iNAAQ,EAAQ;QAAC,GAAG;QAAG,GAAG;QAAG,GAAG;QAAG,GAAG;IAAG;IAC7D,MAAM,WAAW,IAAA,+MAAM,EAAQ;IAC/B,MAAM,WAAW,IAAA,+MAAM,EAAgB;IAGvC,IAAA,kNAAS,EAAC;QACN,IAAI,QAAuB;QAC3B,IAAI,OAAO,SAAS,OAAO;QAC3B,IAAI,KAAK;QACT,MAAM,WAAW;QAEjB,MAAM,UAAU,CAAC;YACb,IAAI,CAAC,OAAO,QAAQ;YACpB,MAAM,IAAI,KAAK,GAAG,CAAC,CAAC,OAAO,KAAK,IAAI,UAAU;YAC9C,MAAM,OAAO,SAAS,MAAM,IAAI;YAEhC,SAAS,OAAO,GAAG;YACnB,MAAM;YAEN,IAAI,IAAI,GAAG;gBACP,SAAS,OAAO,GAAG,sBAAsB;YAC7C,OAAM;gBACF,OAAO;gBACP,KAAK;gBACL,QAAQ;gBACR,SAAS,OAAO,GAAG,sBAAsB;YAC7C;QACJ;QACA,SAAS,OAAO,GAAG,sBAAsB;QAEzC,OAAO;YACH,IAAI,SAAS,OAAO,EAAE,qBAAqB,SAAS,OAAO;QAC/D;IACJ,GAAE,EAAE;IAEJ,OAAO;QACH;IACJ;AACJ"}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/app/anonlove/things/utils/auth.ts"],"sourcesContent":["import { supabase } from \"@/utils/supabase/alSupabase\";\r\n\r\nexport async function getCurrentUser() {\r\n    const {data, error} = await supabase.auth.getUser()\r\n    if(error) return\r\n    return data.user\r\n}\r\n\r\nexport async function getUserProfile(userId: string) {\r\n    const {data, error} = await supabase\r\n        .from(\"users\")\r\n        .select(\"public_id, username\")\r\n        .eq(\"id_user\", userId)\r\n        .single()\r\n    if(error) return null\r\n    return data\r\n}\r\n\r\nexport async function sighOut() {\r\n    const {error} = await supabase.auth.signOut()\r\n    if(error) throw error\r\n}\r\n\r\nexport function onAuthStateChange(callback: (user:any) => void) {\r\n    const {data: listener} = supabase.auth.onAuthStateChange((event,session) => {\r\n        callback(session?.user || null)\r\n    })\r\n    return listener.subscription\r\n}"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEO,eAAe;IAClB,MAAM,EAAC,IAAI,EAAE,KAAK,EAAC,GAAG,MAAM,2IAAQ,CAAC,IAAI,CAAC,OAAO;IACjD,IAAG,OAAO;IACV,OAAO,KAAK,IAAI;AACpB;AAEO,eAAe,eAAe,MAAc;IAC/C,MAAM,EAAC,IAAI,EAAE,KAAK,EAAC,GAAG,MAAM,2IAAQ,CAC/B,IAAI,CAAC,SACL,MAAM,CAAC,uBACP,EAAE,CAAC,WAAW,QACd,MAAM;IACX,IAAG,OAAO,OAAO;IACjB,OAAO;AACX;AAEO,eAAe;IAClB,MAAM,EAAC,KAAK,EAAC,GAAG,MAAM,2IAAQ,CAAC,IAAI,CAAC,OAAO;IAC3C,IAAG,OAAO,MAAM;AACpB;AAEO,SAAS,kBAAkB,QAA4B;IAC1D,MAAM,EAAC,MAAM,QAAQ,EAAC,GAAG,2IAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,OAAM;QAC5D,SAAS,SAAS,QAAQ;IAC9B;IACA,OAAO,SAAS,YAAY;AAChC"}},
    {"offset": {"line": 349, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/app/anonlove/things/hooks/useAuth.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { getCurrentUser, getUserProfile, onAuthStateChange } from \"../utils/auth\"\r\n\r\nexport function useAuth() {\r\n    const [user, setUser] = useState<any>(null)\r\n    const [profile, setProfile] = useState<any>(null)\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    useEffect(() => {\r\n        const loadUser = async () => {\r\n            try {\r\n                const userData = await getCurrentUser()\r\n                setUser(userData)\r\n\r\n                if(userData) {\r\n                    const profileData = await getUserProfile(userData.id)\r\n                    setProfile(profileData)\r\n                }\r\n            } catch (error) {\r\n                console.error(\"Error loading user:\", error)\r\n            } finally {\r\n                setLoading(false)\r\n            }\r\n        }\r\n        loadUser()\r\n\r\n        const subscription = onAuthStateChange(async (newUser) => {\r\n            setUser(newUser)\r\n            if (newUser) {\r\n                const profileData = await getUserProfile(newUser.id)\r\n                setProfile(profileData)\r\n            } else {\r\n                setProfile(null)\r\n            }\r\n        })\r\n\r\n        return () => {\r\n            subscription.unsubscribe()\r\n        }\r\n    },[])\r\n\r\n    return {user,profile,loading}\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKO,SAAS;IACZ,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAM;IACtC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAM;IAC5C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACN,MAAM,WAAW;YACb,IAAI;gBACA,MAAM,WAAW,MAAM,IAAA,4JAAc;gBACrC,QAAQ;gBAER,IAAG,UAAU;oBACT,MAAM,cAAc,MAAM,IAAA,4JAAc,EAAC,SAAS,EAAE;oBACpD,WAAW;gBACf;YACJ,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,uBAAuB;YACzC,SAAU;gBACN,WAAW;YACf;QACJ;QACA;QAEA,MAAM,eAAe,IAAA,+JAAiB,EAAC,OAAO;YAC1C,QAAQ;YACR,IAAI,SAAS;gBACT,MAAM,cAAc,MAAM,IAAA,4JAAc,EAAC,QAAQ,EAAE;gBACnD,WAAW;YACf,OAAO;gBACH,WAAW;YACf;QACJ;QAEA,OAAO;YACH,aAAa,WAAW;QAC5B;IACJ,GAAE,EAAE;IAEJ,OAAO;QAAC;QAAK;QAAQ;IAAO;AAChC"}},
    {"offset": {"line": 401, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/app/anonlove/createcard/btnFunction.ts"],"sourcesContent":["\r\nimport React from \"react\"\r\nimport { Item } from \"../things/types/type\"\r\n\r\nexport const createText = (setItems: React.Dispatch<React.SetStateAction<Item[]>>) => {\r\n        setItems(prev => [...prev, {\r\n            id: prev.length,\r\n            type: \"text\",\r\n            content: `new text ${prev.length + 1}`,\r\n            x: 0 ,\r\n            y: 0 + prev.length * 20,\r\n            w: 100,\r\n            h: 50,\r\n            fontSize: 16,\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            rotation: 0,\r\n            isEditing: 'none'\r\n        }])\r\n    }"],"names":[],"mappings":";;;;AAIO,MAAM,aAAa,CAAC;IACnB,SAAS,CAAA,OAAQ;eAAI;YAAM;gBACvB,IAAI,KAAK,MAAM;gBACf,MAAM;gBACN,SAAS,CAAC,SAAS,EAAE,KAAK,MAAM,GAAG,GAAG;gBACtC,GAAG;gBACH,GAAG,IAAI,KAAK,MAAM,GAAG;gBACrB,GAAG;gBACH,GAAG;gBACH,UAAU;gBACV,QAAQ;gBACR,QAAQ;gBACR,UAAU;gBACV,WAAW;YACf;SAAE;AACN"}},
    {"offset": {"line": 428, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/app/anonlove/createcard/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\n\r\nimport { useState,useEffect, useRef } from \"react\"\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport { useMessages } from \"../things/hooks/useMessages\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { useRandColor } from \"./useRandColor\";\r\nimport { useAuth } from \"../things/hooks/useAuth\";\r\nimport { Item } from \"../things/types/type\";\r\n\r\nimport { createText } from \"./btnFunction\";\r\nimport { userItemInteractions } from \"./useItemInteractions\";\r\n\r\n\r\ntype MessageData = {\r\n    items: Item[]\r\n}\r\n\r\nexport default function CreateCardPage({initialData}: {initialData?: MessageData}) {\r\n    const searchParams = useSearchParams()\r\n    const rawTo = searchParams.get(\"to\")\r\n    const to = rawTo ? decodeURIComponent(rawTo) : null\r\n    const [messageId, setMessageId] = useState<string | null>(null) // получаем из url\r\n    const [isReply, setIsReply] = useState(false)\r\n\r\n\r\n    const {user, profile, loading: authLoading} = useAuth();\r\n    const {inbox, sent, sendMessage: send, loading: messageLoading} = useMessages(user?.id || null);\r\n    const router = useRouter()\r\n\r\n    const [items, setItems] = useState<Item[]>(initialData?.items || [])\r\n    const fieldRef = useRef<HTMLDivElement>(null)\r\n\r\n    const [rightPanelOpen, setRightPanelOpen] = useState(false)\r\n    const idRef = useRef<HTMLInputElement>(null)\r\n    const anonRef = useRef<HTMLInputElement>(null)\r\n    const [isAnon, setIsAnon] = useState(false)\r\n\r\n    useEffect(() => {\r\n        if (to){\r\n            setMessageId(to)\r\n            setIsReply(true)\r\n        };\r\n    },[to])\r\n\r\n    \r\n\r\n    const dragRef = useRef<{\r\n        id: number | null,\r\n        offsetX: number,\r\n        offsetY: number,\r\n        w: number,\r\n        h: number\r\n    }>({\r\n        id: null,\r\n        offsetX: 0,\r\n        offsetY: 0,\r\n        w: 0,\r\n        h: 0\r\n    })\r\n    \r\n    // drag and drop\r\n    const startDrag = (\r\n        e: React.MouseEvent<HTMLDivElement>, \r\n        item: Item\r\n    ) => {\r\n        const rect = fieldRef.current!.getBoundingClientRect()\r\n\r\n        dragRef.current = {\r\n            id: item.id,\r\n            offsetX: e.clientX - rect.left - item.x,\r\n            offsetY: e.clientY - rect.top - item.y,\r\n            w: item.w,\r\n            h: item.h\r\n        }\r\n\r\n        window.addEventListener(\"mousemove\", onDragMove)\r\n        window.addEventListener(\"mouseup\", stopDrag)\r\n    }\r\n    const onDragMove = (e: MouseEvent) => {\r\n        if(resizeRef.current.id !== null) return;\r\n        const rect = fieldRef.current!.getBoundingClientRect()\r\n        const drag = dragRef.current\r\n        if (drag.id === null) return;\r\n\r\n        let x = e.clientX - rect.left - drag.offsetX\r\n        let y = e.clientY - rect.top - drag.offsetY\r\n\r\n        x = Math.max(0, Math.min(x, rect.width - drag.w)); // -50 чтобы элемент не ушел полностью\r\n        y = Math.max(0, Math.min(y, rect.height - drag.h));\r\n\r\n        setItems(prev => prev.map(it => it.id === drag.id ? {...it, x, y} : it))\r\n    }\r\n    const stopDrag = () => {\r\n        dragRef.current.id = null\r\n        window.removeEventListener(\"mousemove\", onDragMove)\r\n        window.removeEventListener(\"mouseup\", stopDrag)\r\n    }\r\n\r\n    // resize\r\n\r\n    type ResizeDirection = \"horizontal\" | \"vertical\" | \"diagonal\"\r\n    const resizeRef = useRef<{\r\n        id: number | null,\r\n        startX: number,\r\n        startY: number,\r\n        startW: number,\r\n        startH: number,\r\n        fontSize?: number,\r\n        direction?: ResizeDirection\r\n    }>({\r\n        id: null,\r\n        startX: 0,\r\n        startY: 0,\r\n        startW: 0,\r\n        startH: 0,\r\n        fontSize: 16,\r\n        direction: \"horizontal\"\r\n    })\r\n\r\n    const startResize = (\r\n        e: React.MouseEvent<HTMLDivElement>, \r\n        item: Item,\r\n        direction: \"horizontal\" | \"vertical\" | \"diagonal\"\r\n    ) => {\r\n        e.stopPropagation()\r\n        resizeRef.current = {\r\n            id: item.id,\r\n            startX: e.clientX,\r\n            startY: e.clientY,\r\n            startW: item.w,\r\n            startH: item.h,\r\n            fontSize: item.fontSize,\r\n            direction: direction \r\n        }\r\n        window.addEventListener(\"mousemove\", onResizeMove)\r\n        window.addEventListener(\"mouseup\", stopResize)\r\n    }\r\n    const onResizeMove = (e: MouseEvent) => {\r\n        const r = resizeRef.current\r\n        if (r.id === null) return;\r\n\r\n        const dx = e.clientX - r.startX\r\n        const dy = e.clientY - r.startY\r\n\r\n        let w = r.startW\r\n        let h = r.startH\r\n        let fontSize = r.fontSize\r\n\r\n        if (r.direction === \"horizontal\") {\r\n            w = Math.max(50, r.startW + dx);\r\n        }\r\n        if (r.direction === \"vertical\") {\r\n            h = Math.max(30, r.startH + dy);\r\n        }\r\n        if (r.direction === \"diagonal\") {\r\n            w = Math.max(50, r.startW + dx);\r\n            h = Math.max(30, r.startH + dy);\r\n            fontSize = Math.max(2, r.fontSize! + (dx+dy) / 10);\r\n        }\r\n\r\n        console.log(\"resize direction:\", r.direction, \"w:\", w, \"h:\", h, \"fontSize:\", fontSize)\r\n        setItems(prev => prev.map(it => it.id === r.id ? {...it, w, h, fontSize} : it))\r\n    }\r\n    const stopResize = () => {\r\n        resizeRef.current.id = null\r\n        window.removeEventListener(\"mousemove\", onResizeMove)\r\n        window.removeEventListener(\"mouseup\", stopResize)\r\n    }\r\n\r\n        \r\n\r\n    // рандомный фон\r\n    const {bg} = useRandColor()\r\n    const bgStyle = `rgba(${Math.floor(bg.r)}, ${Math.floor(bg.g)}, ${Math.floor(bg.b)}, ${bg.a})`\r\n\r\n    const handleSendMessage = async () => {\r\n        const id = idRef.current?.value || \"\"\r\n        const anonCheckbox = anonRef.current?.checked || false\r\n\r\n        if (!id){\r\n            alert('Введи ID, сладкий!')\r\n            return\r\n        }\r\n        const cleanItems = items.map(({isSelected, isEditing, ...rest}) => rest)\r\n        console.log(\"SEND PAYLOAD\", cleanItems)\r\n        \r\n        try {\r\n            await send({publicId: id}, cleanItems, isAnon)\r\n\r\n            idRef.current!.value = \"\"\r\n            setRightPanelOpen(false)\r\n        } catch (error: any) {\r\n            console.log(error.message || 'Error sending message');\r\n        }\r\n        \r\n    }\r\n\r\n\r\n    return (\r\n        <div \r\n            className={`relative flex flex-col justify-center items-center h-full`}\r\n            style={{ \r\n                backgroundColor: bgStyle\r\n            }}\r\n        >\r\n            {/* field */}\r\n            <div\r\n                className=\"relative border w-1/2 h-1/2 rounded-md bg-white overflow-hidden z-10\"\r\n                ref={fieldRef}\r\n                onMouseDown={(e) =>{\r\n                    if(e.target !== e.currentTarget) return;\r\n                    setItems(prev => prev.map(it => ({...it, isSelected: false, isEditing: 'none'})))\r\n                }}\r\n            >\r\n                {items.map((item,i) => (\r\n                    <div \r\n                        key={item.id}\r\n                        className=\"flex text-black select-none border relative\"\r\n                        style={{\r\n                            position: \"absolute\",\r\n                            left: item.x,\r\n                            top: item.y,\r\n                            width: item.w,\r\n                            height: item.h,\r\n                            fontSize: item.fontSize,\r\n                            cursor: item.isSelected ? \"move\" : \"pointer\",\r\n                        }}\r\n                    onDoubleClick={() => {\r\n                        setItems(prev => prev.map(it => it.id === item.id ? {...it, isEditing: \"text\"} : it))\r\n                    }}\r\n                    onMouseDown={(e) => {\r\n                        startDrag(e,item)\r\n                        setItems(prev => prev.map(it => ({...it, isSelected: it.id === item.id})))\r\n                    }}\r\n                    \r\n                    >\r\n                        {item.isEditing === \"text\" \r\n                        ?(\r\n                            <input\r\n                                autoFocus\r\n                                value={item.content}\r\n                                onChange={(e) => {\r\n                                    setItems(prev => prev.map(it => it.id === item.id \r\n                                        ? {...it, content: e.target.value} \r\n                                        : it))\r\n                                }}\r\n                                onBlur={() => {\r\n                                    setItems(prev => prev.map(it => it.id === item.id \r\n                                        ? {...it, isEditing: 'none'}\r\n                                        : it\r\n                                    ))\r\n                                }}\r\n                                onKeyDown={(e) => {\r\n                                    if(e.key === \"Enter\") e.currentTarget.blur()\r\n                                }}\r\n                            >\r\n                            \r\n                            </input>\r\n\r\n                        ): (\r\n                            <div className={`relative w-full h-full text-wrap wrap-break-word\r\n                                            ${item.isSelected ? \" \" : \"overflow-hidden\" }`}> \r\n                                {item.content}\r\n\r\n                                {item.isSelected && (\r\n                                    <div className=\"\">\r\n                                        <div \r\n                                            onMouseDown={(e) => {\r\n                                                e.stopPropagation()\r\n                                                startResize(e, item, \"horizontal\")\r\n                                            }}\r\n                                            className=\"absolute -right-2.5 bottom-1/2 translate-y-1/2 w-3 h-3 bg-white \r\n                                                    border cursor-w-resize\"> \r\n\r\n                                        </div>\r\n                                        <div \r\n                                            onMouseDown={(e) => {\r\n                                                e.stopPropagation()\r\n                                                startResize(e, item, \"vertical\")\r\n                                            }}\r\n                                            className=\"absolute -bottom-2.5 left-1/2 -translate-x-1/2 w-3 h-3 bg-white \r\n                                                    border cursor-s-resize\"> \r\n\r\n                                        </div>\r\n                                        <div \r\n                                            onMouseDown={(e) => {\r\n                                                e.stopPropagation()\r\n                                                startResize(e, item, \"diagonal\")\r\n                                            }}\r\n                                            className=\"absolute -bottom-2.5 right-[-10px]  w-3 h-3 bg-white \r\n                                                    border cursor-se-resize\"> \r\n\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        )}\r\n\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"flex p-2 mt-10\">\r\n\r\n                <button\r\n                    className=\"p-2 border rounded-2xl\"  \r\n                    onClick={() => createText(setItems)}\r\n                >\r\n                    Text\r\n                </button>\r\n\r\n            </div>\r\n\r\n            {/* кнопка назад */}\r\n            <div\r\n                className=\"absolute left-0 inset-y-0 flex justify-center items-center \r\n                w-7 rounded-r-full bg-white/10 hover:bg-white/20 transition-cursor\"\r\n            >\r\n                <button \r\n                    onClick={() => router.push(\"anonlovemain\")}\r\n                    className=\"w-full h-full\">\r\n                    {`<`}\r\n                </button>\r\n            </div>\r\n\r\n            {/* поле сохранить */}\r\n            <div\r\n                className=\"absolute right-0 inset-y-0 flex justify-center items-center\r\n                w-7 rounded-l-full bg-white/10 hover:bg-white/20 transition-cursor\"\r\n            >\r\n                <button \r\n                    onClick={() => {setRightPanelOpen(true)}}\r\n                    className=\"w-full h-full\">\r\n                    {`...`}\r\n                </button>\r\n\r\n                    <div\r\n                        className={`fixed inset-0 z-30 bg-black/50 transition-all duration-300\r\n                                ${rightPanelOpen ? \"backdrop-blur-lg translate-x-0\" : \"backdrop-blur-none translate-x-full\"}\r\n                            `}\r\n                        onMouseDown={(e) => setRightPanelOpen(false)}\r\n                    >\r\n                        <div \r\n                            className=\"absolute right-0 inset-y-0 flex justify-center items-center w-[400px] bg-black/90 z-20\"\r\n                            onMouseDown={(e) => {\r\n                                e.stopPropagation()\r\n                            }}\r\n                        >   \r\n                            <form \r\n                                className=\"relative flex flex-col w-full justify-center items-center\"\r\n                                onSubmit={(e) => {\r\n                                    e.preventDefault()\r\n                                }}\r\n                                >\r\n                                <input\r\n                                    ref={idRef}\r\n                                    value={messageId || ''}\r\n                                    onChange={(e) => setMessageId(e.target.value)}\r\n                                    disabled={isReply}\r\n                                    type=\"text\"\r\n                                    placeholder=\"ID кисы\"\r\n                                    className={`p-2 mb-4 w-1/2 bg-white/10 border rounded-md text-white\r\n                                            ${isReply && \"opacity-50\"}\r\n                                    `}\r\n                                />\r\n                                <div className=\"flex w-full justify-center items-center\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        ref={anonRef}\r\n                                        checked={isAnon}\r\n                                        onChange={(e) => {setIsAnon}}\r\n                                        className=\"bg-white/10 border rounded-md text-white\"\r\n                                    />\r\n                                    <span className=\"text-[10px]\">{`Будешь анонимен? (потом можно изменить)`}</span>\r\n                                </div>\r\n\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    className=\"p-2 mt-4 border rounded-2xl hover:bg-white/20 transition-all duration-200\"\r\n                                    onClick={handleSendMessage}\r\n                                >\r\n                                    Отправить\r\n                                </button>\r\n\r\n                                <button \r\n                                    className=\"absolute left-0 w-10 h-20 bg-white/20 rounded-r-full top-1/2 -translate-y-1/2\r\n                                    hover:bg-white/40 transition-all duration-200\r\n                                    \"\r\n                                    onClick={() => setRightPanelOpen(false)}\r\n                                >\r\n                                    {`>`}\r\n                                </button>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n            </div>\r\n\r\n\r\n        </div>\r\n    )\r\n}"],"names":[],"mappings":"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"}}]
}