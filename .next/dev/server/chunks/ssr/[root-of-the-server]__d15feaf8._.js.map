{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/app/test/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRef, useState } from \"react\";\r\nimport html2canvas from \"html2canvas\";\r\n\r\ntype Particle = {\r\n  x: number;\r\n  y: number;\r\n  vx: number;\r\n  vy: number;\r\n  opacity: number;\r\n  img: ImageData;\r\n};\r\n\r\nexport default function Test() {\r\n  const msgRef = useRef<HTMLDivElement>(null);\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const [hidden, setHidden] = useState(false);\r\n\r\n  const shatter = async () => {\r\n    if (!msgRef.current || !canvasRef.current) return;\r\n\r\n    const rect = msgRef.current.getBoundingClientRect();\r\n    const canvas = canvasRef.current;\r\n    \r\n    // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä—É–µ–º –∫–∞–Ω–≤–∞—Å —Ç–æ—á–Ω–æ –Ω–∞ –º–µ—Å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏—è\r\n    canvas.style.left = `${rect.left}px`;\r\n    canvas.style.top = `${rect.top}px`;\r\n    canvas.width = rect.width;\r\n    canvas.height = rect.height;\r\n\r\n    // üî• –°–ù–ò–ú–û–ö DOM\r\n    const snapshot = await html2canvas(msgRef.current, {\r\n      backgroundColor: null,\r\n      scale: 1, // —Ñ–∏–∫—Å–∏–º —Ä–∞–∑–º—ã—Ç–∏–µ –Ω–∞ retina\r\n    });\r\n\r\n    const ctx = canvas.getContext(\"2d\", {\r\n      willReadFrequently: true,\r\n    })!;\r\n\r\n    ctx.drawImage(snapshot, 0, 0);\r\n\r\n    const size = 8; // —É–≤–µ–ª–∏—á–∏–ª —á—Ç–æ–± –±—ã–ª–æ –º–µ–Ω—å—à–µ —á–∞—Å—Ç–∏—Ü = –±—ã—Å—Ç—Ä–µ–µ\r\n    const particles: Particle[] = [];\r\n\r\n    for (let y = 0; y < canvas.height; y += size) {\r\n      for (let x = 0; x < canvas.width; x += size) {\r\n        const img = ctx.getImageData(x, y, size, size);\r\n\r\n        // –ø—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –ø–∏–∫—Å–µ–ª–∏\r\n        let hasOpaque = false;\r\n        for (let i = 3; i < img.data.length; i += 4) {\r\n          if (img.data[i] > 20) { // alpha > 20\r\n            hasOpaque = true;\r\n            break;\r\n          }\r\n        }\r\n\r\n        if (!hasOpaque) continue;\r\n\r\n        particles.push({\r\n          x,\r\n          y,\r\n          vx: (Math.random() - 0.5) * 6,\r\n          vy: (Math.random() - 0.5) * 4 - 3, // —Ä–∞–∑–ª–µ—Ç–∞—é—Ç—Å—è –≤–≤–µ—Ä—Ö\r\n          opacity: 1,\r\n          img,\r\n        });\r\n      }\r\n    }\r\n\r\n    // üí• –£–ë–ò–†–ê–ï–ú DOM\r\n    setHidden(true);\r\n\r\n    let lastTime = performance.now();\r\n\r\n    const animate = (currentTime: number) => {\r\n      const deltaTime = (currentTime - lastTime) / 1000; // —Å–µ–∫—É–Ω–¥—ã\r\n      lastTime = currentTime;\r\n\r\n      ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n\r\n      let anyAlive = false;\r\n\r\n      particles.forEach((p) => {\r\n        // –≥—Ä–∞–≤–∏—Ç–∞—Ü–∏—è\r\n        p.vy += 0.5 * (deltaTime * 60); // –Ω–æ—Ä–º–∞–ª–∏–∑—É–µ–º –ø–æ FPS\r\n        p.x += p.vx * (deltaTime * 60);\r\n        p.y += p.vy * (deltaTime * 60);\r\n        p.opacity -= 0.015 * (deltaTime * 60);\r\n\r\n        if (p.opacity > 0) {\r\n          anyAlive = true;\r\n          ctx.globalAlpha = Math.max(0, p.opacity);\r\n          ctx.putImageData(p.img, Math.round(p.x), Math.round(p.y));\r\n        }\r\n      });\r\n\r\n      ctx.globalAlpha = 1;\r\n\r\n      if (anyAlive) {\r\n        requestAnimationFrame(animate);\r\n      } else {\r\n        // –æ—á–∏—â–∞–µ–º –∫–∞–Ω–≤–∞—Å –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n      }\r\n    };\r\n\r\n    requestAnimationFrame(animate);\r\n  };\r\n\r\n  return (\r\n    <div className=\"p-20 bg-slate-900 min-h-screen text-white relative\">\r\n      {!hidden && (\r\n        <div\r\n          ref={msgRef}\r\n          onClick={shatter}\r\n          style={{\r\n            backgroundColor: \"rgba(60, 60, 70, 0.95)\",\r\n            color: \"#ffffff\",\r\n            padding: \"12px 16px\",\r\n            borderRadius: \"12px\",\r\n            cursor: \"pointer\",\r\n            fontSize: \"15px\",\r\n            lineHeight: \"1.4\",\r\n            userSelect: \"none\",\r\n          }}\r\n        >\r\n          –£–¥–∞–ª—è—é—Å—å –∫–∞–∫ –≤ Telegram üí•\r\n        </div>\r\n      )}\r\n\r\n      <canvas\r\n        ref={canvasRef}\r\n        className=\"absolute pointer-events-none\"\r\n        style={{ position: \"fixed\" }} // fixed —á—Ç–æ–± –Ω–µ –ø—Ä—ã–≥–∞–ª –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ\r\n      />\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}