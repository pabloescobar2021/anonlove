{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/anonlove/things/data.ts"],"sourcesContent":["\r\nexport const size = {\r\n    width: 200,\r\n    height: 200,\r\n}\r\n\r\nexport const step = {\r\n    s: 20,\r\n    c: 10\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;AACO,MAAM,OAAO;IAChB,OAAO;IACP,QAAQ;AACZ;AAEO,MAAM,OAAO;IAChB,GAAG;IACH,GAAG;AACP"}},
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/utils/supabase/alSupabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_ANONLOVE_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_ANONLOVE_SUPABASE_ANON_KEY!\r\n);"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,uLAAY"}},
    {"offset": {"line": 33, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/anonlove/things/utils/messages.ts"],"sourcesContent":["import { supabase } from \"@/utils/supabase/alSupabase\";\r\nimport { error } from \"console\";\r\n\r\nexport async function getInboxMessages(userId: string){\r\n    const {data, error} = await supabase\r\n        .from(\"messages_safe\")\r\n        .select(`\r\n            id,\r\n            body,\r\n            created_at,\r\n            is_anon,\r\n            from_user,\r\n            from_public_id,\r\n            from_username\r\n            `)\r\n        .eq(\"to_user\", userId)\r\n        .order(\"created_at\", {ascending: true})\r\n    if(error) throw error;\r\n    return data || []\r\n}\r\n\r\nexport async function getSentMessages(userId: string) {\r\n    const {data, error} = await supabase\r\n        .from(\"messages\")\r\n        .select(`\r\n            id,\r\n            body,\r\n            created_at,\r\n            is_anon,\r\n            to_user: to_user (\r\n                public_id,\r\n                username\r\n            )\r\n        `)\r\n        .eq(\"from_user\", userId)\r\n        .order(\"created_at\", {ascending: true})\r\n    if(error) throw error\r\n    return data || []\r\n}\r\n\r\nexport async function sendMessage({\r\n    fromUserId,\r\n    toPublicId,\r\n    body,\r\n    isAnon\r\n}: {\r\n    fromUserId: string,\r\n    toPublicId: string,\r\n    body: string,\r\n    isAnon: boolean\r\n}) {\r\n    const {data: receiver, error: userError} = await supabase\r\n        .from(\"users\")\r\n        .select(\"id_user\")\r\n        .eq(\"public_id\", toPublicId)\r\n        .single()\r\n    if(userError || !receiver){\r\n        throw new Error(\"Пользователь не найден, кись\")\r\n    }\r\n\r\n    const {error: messageError} = await supabase\r\n        .from(\"messages\")\r\n        .insert({\r\n            from_user: fromUserId,\r\n            to_user: receiver.id_user,\r\n            body,\r\n            is_anon: isAnon\r\n        })\r\n    if(messageError) throw messageError\r\n}"],"names":[],"mappings":";;;;;;;;AAAA;;AAGO,eAAe,iBAAiB,MAAc;IACjD,MAAM,EAAC,IAAI,EAAE,KAAK,EAAC,GAAG,MAAM,2IAAQ,CAC/B,IAAI,CAAC,iBACL,MAAM,CAAC,CAAC;;;;;;;;YAQL,CAAC,EACJ,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,cAAc;QAAC,WAAW;IAAI;IACzC,IAAG,OAAO,MAAM;IAChB,OAAO,QAAQ,EAAE;AACrB;AAEO,eAAe,gBAAgB,MAAc;IAChD,MAAM,EAAC,IAAI,EAAE,KAAK,EAAC,GAAG,MAAM,2IAAQ,CAC/B,IAAI,CAAC,YACL,MAAM,CAAC,CAAC;;;;;;;;;QAST,CAAC,EACA,EAAE,CAAC,aAAa,QAChB,KAAK,CAAC,cAAc;QAAC,WAAW;IAAI;IACzC,IAAG,OAAO,MAAM;IAChB,OAAO,QAAQ,EAAE;AACrB;AAEO,eAAe,YAAY,EAC9B,UAAU,EACV,UAAU,EACV,IAAI,EACJ,MAAM,EAMT;IACG,MAAM,EAAC,MAAM,QAAQ,EAAE,OAAO,SAAS,EAAC,GAAG,MAAM,2IAAQ,CACpD,IAAI,CAAC,SACL,MAAM,CAAC,WACP,EAAE,CAAC,aAAa,YAChB,MAAM;IACX,IAAG,aAAa,CAAC,UAAS;QACtB,MAAM,IAAI,MAAM;IACpB;IAEA,MAAM,EAAC,OAAO,YAAY,EAAC,GAAG,MAAM,2IAAQ,CACvC,IAAI,CAAC,YACL,MAAM,CAAC;QACJ,WAAW;QACX,SAAS,SAAS,OAAO;QACzB;QACA,SAAS;IACb;IACJ,IAAG,cAAc,MAAM;AAC3B"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/anonlove/things/hooks/useMessages.ts"],"sourcesContent":["\"use client\"\r\n\r\nimport { useState, useEffect } from \"react\"\r\nimport { getInboxMessages, getSentMessages, sendMessage } from \"../utils/messages\"\r\n\r\nexport function useMessages(userId: string | null){\r\n    const [inbox, setInbox] = useState<any[]>([])\r\n    const [sent, setSent] = useState<any[]>([])\r\n    const [loading, setLoading] = useState(true)\r\n\r\n    const loadMessage = async () => {\r\n        if(!userId) return\r\n\r\n        try{\r\n            setLoading(true)\r\n            const [inboxData, sentData] = await Promise.all([\r\n                getInboxMessages(userId), \r\n                getSentMessages(userId)\r\n            ])\r\n\r\n            setInbox(inboxData)\r\n            setSent(sentData)\r\n        } catch (error) {\r\n            console.error(\"Error loading messages:\", error)\r\n        } finally {\r\n            setLoading(false)\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadMessage()\r\n    },[userId])\r\n\r\n    const send = async (toPublicId: string, body: string, isAnon: boolean) => {\r\n        if(!userId) throw new Error(\"User not logged in\")\r\n        \r\n        await sendMessage({fromUserId: userId, toPublicId, body, isAnon})\r\n\r\n        await loadMessage()\r\n    }\r\n\r\n    return {\r\n        inbox,\r\n        sent,\r\n        loading,\r\n        sendMessage: send,\r\n        refresh: loadMessage\r\n    }\r\n\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;AAKO,SAAS,YAAY,MAAqB;IAC7C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAC5C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAQ,EAAE;IAC1C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,MAAM,cAAc;QAChB,IAAG,CAAC,QAAQ;QAEZ,IAAG;YACC,WAAW;YACX,MAAM,CAAC,WAAW,SAAS,GAAG,MAAM,QAAQ,GAAG,CAAC;gBAC5C,IAAA,kKAAgB,EAAC;gBACjB,IAAA,iKAAe,EAAC;aACnB;YAED,SAAS;YACT,QAAQ;QACZ,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,2BAA2B;QAC7C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,IAAA,kNAAS,EAAC;QACN;IACJ,GAAE;QAAC;KAAO;IAEV,MAAM,OAAO,OAAO,YAAoB,MAAc;QAClD,IAAG,CAAC,QAAQ,MAAM,IAAI,MAAM;QAE5B,MAAM,IAAA,6JAAW,EAAC;YAAC,YAAY;YAAQ;YAAY;YAAM;QAAM;QAE/D,MAAM;IACV;IAEA,OAAO;QACH;QACA;QACA;QACA,aAAa;QACb,SAAS;IACb;AAEJ"}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/anonlove/lovecard/page.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport { useEffect, useState } from \"react\"\r\n\r\nimport { size,step } from \"../things/data\"\r\n\r\nimport { useAuth } from \"../things/hooks/useAuth\";\r\nimport { useMessages } from \"../things/hooks/useMessages\"\r\n\r\nexport default function AnonLoveMain() {\r\n\r\n    const {inbox} = useMessages(null)\r\n\r\n    const [sizeFigure, setSizeFigure] = useState(size)\r\n    const [scale, setScale] = useState(1)\r\n    const maxWidth = 400\r\n\r\n    const tap = () => {\r\n        setSizeFigure(prev => ({\r\n            width: prev.width + step.s,\r\n            height: prev.height + step.s\r\n        }))\r\n\r\n        setScale(1.2);\r\n        setTimeout(() => setScale(0.95), 120);\r\n        setTimeout(() => setScale(1.05), 220);\r\n        setTimeout(() => setScale(1), 320);\r\n\r\n        const interval =setInterval(() => {\r\n            setScale(1.2);\r\n            setTimeout(() => setScale(0.95), 120);\r\n            setTimeout(() => setScale(1.05), 220);\r\n            setTimeout(() => setScale(1), 320);\r\n        }, 1000);\r\n\r\n        setTimeout(() => clearInterval(interval), 1000);\r\n    }\r\n    \r\n\r\n    const viewBox = 100\r\n    const center = viewBox /2\r\n\r\n    if(sizeFigure.width <= maxWidth ){\r\n        return (\r\n            <div className=\"flex justify-center items-center bg-black h-full\"\r\n            >\r\n                <svg \r\n                    width={sizeFigure.width} \r\n                    height={sizeFigure.height}\r\n                    viewBox={`0 0 ${viewBox} ${viewBox}`}\r\n                    className=\"overflow-visible\"\r\n                >\r\n                    <path\r\n                        onClick={tap}\r\n                        className=\"cursor-pointer transition-transform duration-150 ease-in-out\"\r\n                        style={{\r\n                            transformOrigin: \"50% 50%\",\r\n                            transform: `scale(${scale})`,\r\n                        }}\r\n                        fill=\"red\"\r\n                        stroke=\"#fff\"\r\n                        strokeWidth={2}\r\n                        d=\"\r\n                            M50 85\r\n                            C20 60, 5 45, 25 25\r\n                            C40 10, 50 25, 50 25\r\n                            C50 25, 60 10, 75 25\r\n                            C95 45, 80 60, 50 85\r\n                        \"\r\n                    >\r\n    \r\n                    </path>\r\n                    \r\n                </svg>\r\n            </div>\r\n        )\r\n    } else {\r\n        return (\r\n            <div \r\n                className=\"flex justify-center items-center bg-black h-full\"\r\n            >\r\n\r\n                <div className=\"flex justify-center items-center border border-white w-1/2 h-1/2\">\r\n\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAGA;AAPA;;;;;AASe,SAAS;IAEpB,MAAM,EAAC,KAAK,EAAC,GAAG,IAAA,gKAAW,EAAC;IAE5B,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,iNAAQ,EAAC,yIAAI;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,WAAW;IAEjB,MAAM,MAAM;QACR,cAAc,CAAA,OAAQ,CAAC;gBACnB,OAAO,KAAK,KAAK,GAAG,yIAAI,CAAC,CAAC;gBAC1B,QAAQ,KAAK,MAAM,GAAG,yIAAI,CAAC,CAAC;YAChC,CAAC;QAED,SAAS;QACT,WAAW,IAAM,SAAS,OAAO;QACjC,WAAW,IAAM,SAAS,OAAO;QACjC,WAAW,IAAM,SAAS,IAAI;QAE9B,MAAM,WAAU,YAAY;YACxB,SAAS;YACT,WAAW,IAAM,SAAS,OAAO;YACjC,WAAW,IAAM,SAAS,OAAO;YACjC,WAAW,IAAM,SAAS,IAAI;QAClC,GAAG;QAEH,WAAW,IAAM,cAAc,WAAW;IAC9C;IAGA,MAAM,UAAU;IAChB,MAAM,SAAS,UAAS;IAExB,IAAG,WAAW,KAAK,IAAI,UAAU;QAC7B,qBACI,8OAAC;YAAI,WAAU;sBAEX,cAAA,8OAAC;gBACG,OAAO,WAAW,KAAK;gBACvB,QAAQ,WAAW,MAAM;gBACzB,SAAS,CAAC,IAAI,EAAE,QAAQ,CAAC,EAAE,SAAS;gBACpC,WAAU;0BAEV,cAAA,8OAAC;oBACG,SAAS;oBACT,WAAU;oBACV,OAAO;wBACH,iBAAiB;wBACjB,WAAW,CAAC,MAAM,EAAE,MAAM,CAAC,CAAC;oBAChC;oBACA,MAAK;oBACL,QAAO;oBACP,aAAa;oBACb,GAAE;;;;;;;;;;;;;;;;IActB,OAAO;QACH,qBACI,8OAAC;YACG,WAAU;sBAGV,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAM3B;AAGJ"}}]
}