{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/utils/supabase/supabaseAdmin.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\n\r\nexport const supabaseAdmin = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.SUPABASE_SERVICE_ROLE_KEY!\r\n);"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM,gBAAgB,IAAA,yLAAY,gFAEvC,QAAQ,GAAG,CAAC,yBAAyB"}},
    {"offset": {"line": 57, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/anonlove/app/api/read-messages/read-all-messages/route.ts"],"sourcesContent":["// /app/api/read-messages/read-all-messages/route.ts\r\nimport { supabaseAdmin } from \"@/utils/supabase/supabaseAdmin\";\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\n\r\nexport async function POST(req: NextRequest) {\r\n    try {\r\n        const body = await req.json();\r\n        const { conversation_id, user_id } = body;\r\n\r\n        if (!conversation_id || !user_id) {\r\n            console.error(\"❌ conversation_id or user_id is missing\");\r\n            return NextResponse.json({ error: \"conversation_id and user_id required\" }, { status: 400 });\r\n        }\r\n\r\n\r\n        const {data, error} = await supabaseAdmin.rpc('read_all_messages_dialog', {\r\n            p_conv_id: conversation_id,\r\n            p_user_id: user_id\r\n        })\r\n        \r\n        if (error) {\r\n            console.error(\"❌ RPC error:\", error);\r\n            throw error;\r\n        }\r\n        \r\n\r\n        return NextResponse.json({ ok: true, data });\r\n    } catch (err) {\r\n        console.error(\"❌ Unexpected error:\", err);\r\n        return NextResponse.json({ \r\n            error: \"Internal server error\",\r\n            message: err instanceof Error ? err.message : String(err),\r\n            stack: err instanceof Error ? err.stack : undefined\r\n        }, { status: 500 });\r\n    }\r\n}"],"names":[],"mappings":"AAAA,oDAAoD;;;;;AACpD;AACA;;;AAEO,eAAe,KAAK,GAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,eAAe,EAAE,OAAO,EAAE,GAAG;QAErC,IAAI,CAAC,mBAAmB,CAAC,SAAS;YAC9B,QAAQ,KAAK,CAAC;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuC,GAAG;gBAAE,QAAQ;YAAI;QAC9F;QAGA,MAAM,EAAC,IAAI,EAAE,KAAK,EAAC,GAAG,MAAM,qJAAa,CAAC,GAAG,CAAC,4BAA4B;YACtE,WAAW;YACX,WAAW;QACf;QAEA,IAAI,OAAO;YACP,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,MAAM;QACV;QAGA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,IAAI;YAAM;QAAK;IAC9C,EAAE,OAAO,KAAK;QACV,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CAAC;YACrB,OAAO;YACP,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG,OAAO;YACrD,OAAO,eAAe,QAAQ,IAAI,KAAK,GAAG;QAC9C,GAAG;YAAE,QAAQ;QAAI;IACrB;AACJ"}}]
}