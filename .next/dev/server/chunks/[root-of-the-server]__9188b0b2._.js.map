{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/casinoRoll/utils/sectorMath.tsx"],"sourcesContent":["\r\n\r\n\r\nexport function polarToCartesian(cx: number, cy: number, r: number, angle: number){\r\n    const rad = (angle - 90) * Math.PI / 180.\r\n    return {\r\n        x: cx + (r * Math.cos(rad)),\r\n        y: cy + (r * Math.sin(rad)),\r\n    }\r\n}\r\n\r\nexport function describeArc(cx: number, cy: number, r: number, startAngle: number, endAngle: number) {\r\n\r\n    const start = polarToCartesian(cx, cy, r, endAngle);\r\n    const end = polarToCartesian(cx, cy, r, startAngle);\r\n    const largeArcFlag = endAngle - startAngle > 180 ? 1 : 0;\r\n\r\n    return `\r\n        M ${cx} ${cy}\r\n        L ${start.x} ${start.y}\r\n        A ${r} ${r} 0 ${largeArcFlag} 0 ${end.x} ${end.y}\r\n        Z\r\n    `;\r\n}\r\n\r\n\r\n// Позиция текста внутри сектора\r\nexport function getTextCoords(cx: number, cy: number, r: number, startAngle: number, endAngle: number, factor: number = 0.65) {\r\n    const angle = (startAngle + endAngle) / 2;\r\n\r\n    const pos = polarToCartesian(cx, cy, r*factor, angle);\r\n\r\n    let rotation = angle - 90;\r\n    return { x: pos.x, y: pos.y, rotation };\r\n}\r\n\r\nexport function generateColor(index: number) {\r\n    const hue = (index * 137.508) % 360; // use golden angle approximation\r\n    return `hsl(${hue}, 70%, 60%)`;\r\n}"],"names":[],"mappings":";;;;;;;;;;AAGO,SAAS,iBAAiB,EAAU,EAAE,EAAU,EAAE,CAAS,EAAE,KAAa;IAC7E,MAAM,MAAM,CAAC,QAAQ,EAAE,IAAI,KAAK,EAAE,GAAG;IACrC,OAAO;QACH,GAAG,KAAM,IAAI,KAAK,GAAG,CAAC;QACtB,GAAG,KAAM,IAAI,KAAK,GAAG,CAAC;IAC1B;AACJ;AAEO,SAAS,YAAY,EAAU,EAAE,EAAU,EAAE,CAAS,EAAE,UAAkB,EAAE,QAAgB;IAE/F,MAAM,QAAQ,iBAAiB,IAAI,IAAI,GAAG;IAC1C,MAAM,MAAM,iBAAiB,IAAI,IAAI,GAAG;IACxC,MAAM,eAAe,WAAW,aAAa,MAAM,IAAI;IAEvD,OAAO,CAAC;UACF,EAAE,GAAG,CAAC,EAAE,GAAG;UACX,EAAE,MAAM,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC;UACrB,EAAE,EAAE,CAAC,EAAE,EAAE,GAAG,EAAE,aAAa,GAAG,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC;;IAErD,CAAC;AACL;AAIO,SAAS,cAAc,EAAU,EAAE,EAAU,EAAE,CAAS,EAAE,UAAkB,EAAE,QAAgB,EAAE,SAAiB,IAAI;IACxH,MAAM,QAAQ,CAAC,aAAa,QAAQ,IAAI;IAExC,MAAM,MAAM,iBAAiB,IAAI,IAAI,IAAE,QAAQ;IAE/C,IAAI,WAAW,QAAQ;IACvB,OAAO;QAAE,GAAG,IAAI,CAAC;QAAE,GAAG,IAAI,CAAC;QAAE;IAAS;AAC1C;AAEO,SAAS,cAAc,KAAa;IACvC,MAAM,MAAM,AAAC,QAAQ,UAAW,KAAK,iCAAiC;IACtE,OAAO,CAAC,IAAI,EAAE,IAAI,WAAW,CAAC;AAClC"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/api/lots/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\r\nimport { generateColor } from \"@/app/casinoRoll/utils/sectorMath\";\r\n\r\ntype Lot = {\r\n    id: string;\r\n    label: string;\r\n    weight: number;\r\n    color?: string;\r\n    enabled?: boolean;\r\n    createdAt: number;\r\n}\r\n\r\nconst lots: Lot[] = [];\r\n\r\n// GET - получить все лоты\r\nexport async function GET(req: NextRequest) {\r\n    const {searchParams} = new URL(req.url)\r\n    const since = searchParams.get('since')\r\n\r\n    if(since){\r\n        const timestamp = Number(since)\r\n        const newLots = lots.filter(lot => lot.createdAt > timestamp)\r\n        console.log(`Запрос новых после ${timestamp}: найдено ${newLots.length}`);\r\n        return NextResponse.json(newLots)\r\n    }\r\n\r\n    return NextResponse.json(lots)\r\n}\r\n\r\n// POST - добавить новый лот\r\nexport async function POST(req: NextRequest) {\r\n    try{\r\n        const body = await req.json()\r\n\r\n        if (!body.label || !body.weight){\r\n            return NextResponse.json(\r\n                {error: 'missing label'},\r\n                {status: 400}\r\n            )\r\n        }\r\n\r\n        const newLot: Lot = {\r\n            id: crypto.randomUUID(),\r\n            label: body.label,\r\n            weight: Number(body.weight),\r\n            color: generateColor(lots.length),\r\n            enabled: true,\r\n            createdAt: Date.now(),\r\n        };\r\n\r\n        lots.push(newLot)\r\n\r\n        \r\n\r\n        return NextResponse.json(newLot, {status: 201})\r\n    } catch (err) {\r\n        return NextResponse.json({error: err}, {status: 500})\r\n    }\r\n}"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAWA,MAAM,OAAc,EAAE;AAGf,eAAe,IAAI,GAAgB;IACtC,MAAM,EAAC,YAAY,EAAC,GAAG,IAAI,IAAI,IAAI,GAAG;IACtC,MAAM,QAAQ,aAAa,GAAG,CAAC;IAE/B,IAAG,OAAM;QACL,MAAM,YAAY,OAAO;QACzB,MAAM,UAAU,KAAK,MAAM,CAAC,CAAA,MAAO,IAAI,SAAS,GAAG;QACnD,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,UAAU,UAAU,EAAE,QAAQ,MAAM,EAAE;QACxE,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC7B;IAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;AAC7B;AAGO,eAAe,KAAK,GAAgB;IACvC,IAAG;QACC,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,MAAM,EAAC;YAC5B,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAC,OAAO;YAAe,GACvB;gBAAC,QAAQ;YAAG;QAEpB;QAEA,MAAM,SAAc;YAChB,IAAI,OAAO,UAAU;YACrB,OAAO,KAAK,KAAK;YACjB,QAAQ,OAAO,KAAK,MAAM;YAC1B,OAAO,IAAA,4JAAa,EAAC,KAAK,MAAM;YAChC,SAAS;YACT,WAAW,KAAK,GAAG;QACvB;QAEA,KAAK,IAAI,CAAC;QAIV,OAAO,gJAAY,CAAC,IAAI,CAAC,QAAQ;YAAC,QAAQ;QAAG;IACjD,EAAE,OAAO,KAAK;QACV,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAC,OAAO;QAAG,GAAG;YAAC,QAAQ;QAAG;IACvD;AACJ"}}]
}