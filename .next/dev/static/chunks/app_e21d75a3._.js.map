{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/providers/providers.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { SessionProvider } from \"next-auth/react\";\r\nimport { CartProvider } from \"./CartContext\";\r\n\r\nexport function Providers({ children }: {children: React.ReactNode}) {\r\n    return(\r\n        <SessionProvider>\r\n            <CartProvider>\r\n                {children}\r\n            </CartProvider>\r\n        </SessionProvider>\r\n    )\r\n        \r\n}"],"names":[],"mappings":";;;;;AAEA;;;;;;AAFA;;;;AAKO,SAAS,UAAU,EAAE,QAAQ,EAA+B;IAC/D,qBACI,6LAAC,oKAAe;kBACZ,cAAA,6LAAC;sBACI;;;;;;;;;;;AAKjB;KATgB"}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/components/Header.tsx"],"sourcesContent":["\"use client\"\r\n\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport Link from \"next/link\";\r\nimport { signIn, signOut, useSession } from \"next-auth/react\";\r\nimport { useCartContext } from \"../providers/CartContext\";\r\n\r\nexport default function Header(){\r\n    const [open, setOpen] = useState(false);\r\n    const { data: session } = useSession();\r\n    const menuRef = useRef<HTMLDivElement | null>(null);\r\n\r\n    const [openSearch, setOpenSearch] = useState(false);\r\n    const [query, setQuery] = useState(\"\");\r\n    const [results, setResults] = useState<Array<{id: string | number; name: string}>>([]); // Результаты поиска\r\n    const [loading, setLoading] = useState(false);\r\n    const cacheRef = useRef<Record<string, Array<{id: string | number; name: string}>>>({}); // Кэш для результатов поиска\r\n\r\n    const { getItemCount } = useCartContext();\r\n\r\n    useEffect(() => {\r\n        function handleOutside(e: MouseEvent) {\r\n            if (!menuRef.current) return;\r\n            if (e.target instanceof Node && !menuRef.current.contains(e.target)) {\r\n                setOpen(false);\r\n            }\r\n        }\r\n\r\n        function handleKey(e: KeyboardEvent) {\r\n            if (e.key === \"Escape\") setOpen(false);\r\n        }\r\n\r\n        document.addEventListener(\"mousedown\", handleOutside);\r\n        document.addEventListener(\"keydown\", handleKey);\r\n        return () => {\r\n            document.removeEventListener(\"mousedown\", handleOutside);\r\n            document.removeEventListener(\"keydown\", handleKey);\r\n        };\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (query.length < 2){\r\n            setResults([]);\r\n            return;\r\n        }\r\n        if (cacheRef.current[query]){\r\n            setResults(cacheRef.current[query]);\r\n            return;\r\n        }\r\n\r\n        const timer = setTimeout(async () => {\r\n            setLoading(true);\r\n            try{\r\n                const res = await fetch(`/api/searchRoute?q=${query}`);\r\n                const data = await res.json();\r\n                cacheRef.current[query] = data;\r\n                setResults(data);\r\n            } finally{\r\n                setLoading(false);\r\n            }\r\n        }, 300);\r\n        return () => clearTimeout(timer);\r\n    }, [query]);\r\n\r\n    return (\r\n        <header className=\"bg-gray-800 text-white\">\r\n            <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n                <div className=\"flex items-center justify-between h-16\">\r\n                    <Link href=\"/\" className=\"flex items-center gap-3\">\r\n                        <span className=\"sr-only\">Главная</span>\r\n                        <svg className=\"w-8 h-8 text-indigo-400\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\" aria-hidden>\r\n                            <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"4\" fill=\"currentColor\" />\r\n                        </svg>\r\n                        <strong className=\"text-white\">Логотип</strong>\r\n                    </Link>\r\n\r\n                    <nav className=\"hidden md:flex gap-6 text-sm justify-center items-center\">\r\n                        <Link href=\"/\" className=\"text-gray-200 hover:underline\">Главная</Link>\r\n                        <Link href=\"/about\" className=\"text-gray-200 hover:underline\">О нас</Link>\r\n                        <Link href=\"/catalog\" className=\"text-gray-200 hover:underline\">Услуги</Link>\r\n\r\n                    {/* Поиск */}\r\n                        <div className=\"relative\">\r\n                            <button className=\"flex items-center text-gray-200 \"\r\n                                onClick={() => setOpenSearch((v) => !v)}\r\n                            >\r\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"size-4\">\r\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z\" />\r\n                                </svg>\r\n                            </button>\r\n\r\n                            <div className={`absolute top-1/2 -translate-y-1/2 p-2 left-full w-64 rounded shadow-lg transition-all duration-100 ${\r\n                                openSearch ? \"opacity-100 translate-x-0\" : \"opacity-0 -translate-x-4 pointer-events-none\"}\r\n                            }`}>\r\n                                <input\r\n                                    value={query}\r\n                                    onChange={(e) => setQuery(e.target.value)}\r\n                                    type=\"text\"\r\n                                    placeholder=\"Поиск...\"\r\n                                    className=\"w-full border p-2 rounded \"\r\n                                    autoFocus\r\n                                />\r\n                            </div>\r\n\r\n                            {results.length > 0 && (\r\n                            <ul className=\"absolute left-full w-64 mt-2 bg-white text-black rounded shadow divide-y\">\r\n                                {results.map((p) => (\r\n                                <li key={p.id}>\r\n                                    <Link\r\n                                    href={`/product/${p.id}`}\r\n                                    className=\"flex items-center gap-3 p-2 hover:bg-gray-100\"\r\n                                    >\r\n                                    <div>\r\n                                        <div className=\"text-sm font-medium\">{p.name}</div>\r\n                                    </div>\r\n                                    </Link>\r\n                                </li>\r\n                                ))}\r\n                            </ul>\r\n                            )}\r\n\r\n                        </div>\r\n                    </nav>\r\n\r\n\r\n                    <div className=\"relative\" ref={menuRef}>\r\n                        {!session ? (\r\n                            <>\r\n                                <button\r\n                                    aria-expanded={open}\r\n                                    aria-haspopup=\"menu\"\r\n                                    onClick={() => setOpen((v) => !v)}\r\n                                    className=\"px-3 py-1 rounded bg-indigo-600 hover:bg-indigo-500 text-sm\"\r\n                                >\r\n                                    Вход\r\n                                </button>\r\n\r\n                                {open && (\r\n                                    <div className=\"absolute right-0 mt-2 z-50 bg-white text-black dark:bg-gray-900 dark:text-white p-4 rounded shadow-lg w-44\">\r\n                                        <div className=\"text-sm mb-2\">Войти с помощью</div>\r\n                                        <button className=\"w-full text-left py-1 hover:bg-gray-100 rounded\" onClick={() => signIn(\"github\")}>\r\n                                            GitHub\r\n                                        </button>\r\n                                        <button className=\"w-full text-left py-1 hover:bg-gray-100 rounded\" onClick={() => signIn(\"google\")}>\r\n                                            Google\r\n                                        </button>\r\n                                    </div>\r\n                                )}\r\n                            </>\r\n                        ) : (\r\n                            <div className=\"flex items-center gap-3\">\r\n                                <span className=\"text-sm\">{session.user?.name ?? session.user?.email}</span>\r\n                                <button className=\"px-3 py-1 rounded border text-sm\" onClick={() => signOut()}>\r\n                                    Выход\r\n                                </button>\r\n                            </div>\r\n                        )}\r\n                        \r\n                        {/* Корзина */}\r\n                        <div>\r\n                            <Link href=\"/cart\" className=\"flex items-center text-gray-200 hover:underline text-[12px] \">\r\n                                <div className=\"mx-auto\">Корзина {getItemCount()}</div>\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </header>\r\n    );\r\n}"],"names":[],"mappings":"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"}}]
}