{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/admin/ProductImageUpload.tsx"],"sourcesContent":["\"use client\"\r\n\r\n\r\ntype Props = {\r\n    product_id: string | number;\r\n    slug: string;\r\n}\r\n\r\n\r\nexport default function ProductImageUpload({ product_id, slug = \"asd\" }: Props) {\r\n    async function handleUpload(e: React.ChangeEvent<HTMLInputElement>) {\r\n        const file = e.target.files?.[0];\r\n        if (!file) return;\r\n\r\n        const formData = new FormData();\r\n        formData.append(\"file\", file);\r\n        formData.append(\"product_id\", product_id.toString());\r\n\r\n        const res = await fetch(\"/api/uploadProductImage\", {\r\n            method: \"POST\",\r\n            body: formData\r\n        });\r\n\r\n        const data = await res.text();\r\n\r\n        if (!res.ok){\r\n            console.error(\"Upload failed:\", data);\r\n            return;\r\n        }\r\n\r\n    }\r\n\r\n    return(\r\n        <div className=\"bg-gray-800 p-2\">\r\n\r\n            <input \r\n            className=\"cursor-pointer\"\r\n            type=\"file\" \r\n            accept=\"image/*\" \r\n            onChange={handleUpload} />\r\n        </div>\r\n    )\r\n}"],"names":[],"mappings":";;;;;AAAA;;AASe,SAAS,mBAAmB,EAAE,UAAU,EAAE,OAAO,KAAK,EAAS;IAC1E,eAAe,aAAa,CAAsC;QAC9D,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,CAAC,MAAM;QAEX,MAAM,WAAW,IAAI;QACrB,SAAS,MAAM,CAAC,QAAQ;QACxB,SAAS,MAAM,CAAC,cAAc,WAAW,QAAQ;QAEjD,MAAM,MAAM,MAAM,MAAM,2BAA2B;YAC/C,QAAQ;YACR,MAAM;QACV;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAE3B,IAAI,CAAC,IAAI,EAAE,EAAC;YACR,QAAQ,KAAK,CAAC,kBAAkB;YAChC;QACJ;IAEJ;IAEA,qBACI,6LAAC;QAAI,WAAU;kBAEX,cAAA,6LAAC;YACD,WAAU;YACV,MAAK;YACL,QAAO;YACP,UAAU;;;;;;;;;;;AAGtB;KAjCwB"}},
    {"offset": {"line": 56, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/utils/supabase/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\r\n\r\nexport const supabase = createClient(\r\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!\r\n);"],"names":[],"mappings":";;;;AAGE;AAHF;;AAEO,MAAM,WAAW,IAAA,0LAAY"}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D0%95%D0%BB%D0%B5%D0%BD%D0%B0/Desktop/next.js/my-next-app/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport ProductImageUpload from \"./admin/ProductImageUpload\";\nimport { supabase } from \"@/utils/supabase/supabase\";\n\n// Типизация категории\ntype Category = {\n  name: string;\n};\n\n// Типизация продукта\ntype Product = {\n  id: number;\n  name: string;\n  main_image: string | null;\n  categories?: Category[]; // массив, так как join всегда возвращает массив\n};\n\nexport default async function Home() {\n  const { data: products, error } = await supabase\n    .from<Product>(\"products\")\n    .select(`\n      id,\n      name,\n      main_image,\n      categories(name)\n    `)\n    .order(\"id\", { ascending: true });\n\n  if (error) {\n    console.error(\"Error fetching products:\", error);\n    return <div>Error loading products</div>;\n  }\n\n  return (\n    <div className=\"p-6 space-y-4\">\n      {products?.map((item) => (\n        <div key={item.id} className=\"p-4 border rounded flex flex-col md:flex-row gap-4\">\n\n          {/* Изображение */}\n          {item.main_image ? (\n            <img\n              src={item.main_image}\n              alt={item.name}\n              className=\"w-64 h-auto rounded\"\n            />\n          ) : (\n            <div className=\"bg-gray-200 border-2 border-dashed rounded-xl w-64 h-48 flex items-center justify-center\">\n              <span className=\"text-gray-500\">No image</span>\n            </div>\n          )}\n\n          {/* Данные продукта */}\n          <div className=\"flex-1 flex flex-col gap-2\">\n            <div><strong>ID:</strong> {item.id}</div>\n            <div><strong>Name:</strong> {item.name}</div>\n            <div>\n              <strong>Category:</strong>{\" \"}\n              {item.categories && item.categories.length > 0\n                ? item.categories[0].name\n                : \"No category\"}\n            </div>\n\n            {/* Компонент загрузки изображения */}\n            <ProductImageUpload\n              product_id={item.id}\n              slug={item.name}\n            />\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAHA;;;;AAkBe,eAAe;IAC5B,MAAM,EAAE,MAAM,QAAQ,EAAE,KAAK,EAAE,GAAG,MAAM,4IAAQ,CAC7C,IAAI,CAAU,YACd,MAAM,CAAC,CAAC;;;;;IAKT,CAAC,EACA,KAAK,CAAC,MAAM;QAAE,WAAW;IAAK;IAEjC,IAAI,OAAO;QACT,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,qBAAO,6LAAC;sBAAI;;;;;;IACd;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACZ,UAAU,IAAI,CAAC,qBACd,6LAAC;gBAAkB,WAAU;;oBAG1B,KAAK,UAAU,iBACd,6LAAC;wBACC,KAAK,KAAK,UAAU;wBACpB,KAAK,KAAK,IAAI;wBACd,WAAU;;;;;6CAGZ,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAK,WAAU;sCAAgB;;;;;;;;;;;kCAKpC,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;;kDAAI,6LAAC;kDAAO;;;;;;oCAAY;oCAAE,KAAK,EAAE;;;;;;;0CAClC,6LAAC;;kDAAI,6LAAC;kDAAO;;;;;;oCAAc;oCAAE,KAAK,IAAI;;;;;;;0CACtC,6LAAC;;kDACC,6LAAC;kDAAO;;;;;;oCAAmB;oCAC1B,KAAK,UAAU,IAAI,KAAK,UAAU,CAAC,MAAM,GAAG,IACzC,KAAK,UAAU,CAAC,EAAE,CAAC,IAAI,GACvB;;;;;;;0CAIN,6LAAC,iJAAkB;gCACjB,YAAY,KAAK,EAAE;gCACnB,MAAM,KAAK,IAAI;;;;;;;;;;;;;eA7BX,KAAK,EAAE;;;;;;;;;;AAoCzB;KAvD8B"}}]
}